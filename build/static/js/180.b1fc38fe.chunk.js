"use strict";(self.webpackChunkagristack_farmer_management=self.webpackChunkagristack_farmer_management||[]).push([[180],{1180:(e,s,a)=>{a.r(s),a.d(s,{default:()=>N});var r=a(5043),n=a(3216),l=a(5016),c=(a(5812),a(8874)),i=a(6428),t=(a(525),a(579));const d=e=>{var s;let{farmer:a,onClose:n,onApprove:l,onReject:c,onReferBack:i}=e;const[d,o]=(0,r.useState)(""),[m,h]=(0,r.useState)(""),[v,j]=(0,r.useState)((null===a||void 0===a?void 0:a.aadharNumber)||""),[u,p]=(0,r.useState)((null===a||void 0===a?void 0:a.panNumber)||"");return a?(0,t.jsx)("div",{className:"kyc-modal-overlay",children:(0,t.jsxs)("div",{className:"kyc-modal-content kyc-modal",children:[(0,t.jsxs)("div",{className:"kyc-modal-header",children:[(0,t.jsxs)("h2",{children:["KYC Review - ",a.name]}),(0,t.jsx)("button",{className:"kyc-modal-close",onClick:n,children:"\xd7"})]}),(0,t.jsxs)("div",{className:"kyc-modal-body",children:[(0,t.jsxs)("div",{className:"kyc-modal-farmer-info",children:[(0,t.jsx)("h3",{children:"Farmer Information"}),(0,t.jsxs)("div",{className:"kyc-modal-info-grid",children:[(0,t.jsxs)("div",{className:"kyc-modal-info-item",children:[(0,t.jsx)("label",{children:"Name:"}),(0,t.jsx)("span",{children:a.name})]}),(0,t.jsxs)("div",{className:"kyc-modal-info-item",children:[(0,t.jsx)("label",{children:"Phone:"}),(0,t.jsx)("span",{children:a.phone})]}),(0,t.jsxs)("div",{className:"kyc-modal-info-item",children:[(0,t.jsx)("label",{children:"Location:"}),(0,t.jsx)("span",{children:a.location})]}),(0,t.jsxs)("div",{className:"kyc-modal-info-item",children:[(0,t.jsx)("label",{children:"Current Status:"}),(0,t.jsx)("span",{className:`kyc-modal-status-badge kyc-modal-status-${null===(s=a.kycStatus)||void 0===s?void 0:s.toLowerCase()}`,children:a.kycStatus})]})]})]}),(0,t.jsxs)("div",{className:"kyc-modal-document-info",children:[(0,t.jsx)("h3",{children:"Required Documents"}),(0,t.jsxs)("div",{className:"kyc-modal-form-grid",children:[(0,t.jsxs)("div",{className:"kyc-modal-form-group",children:[(0,t.jsx)("label",{children:"Aadhar Number:"}),(0,t.jsx)("input",{type:"text",value:v,onChange:e=>j(e.target.value),placeholder:"Enter 12-digit Aadhar number",maxLength:"12",className:v.length>0&&12!==v.length?"kyc-modal-error":""}),v.length>0&&12!==v.length&&(0,t.jsx)("span",{className:"kyc-modal-error-text",children:"Aadhar number must be 12 digits"})]}),(0,t.jsxs)("div",{className:"kyc-modal-form-group",children:[(0,t.jsx)("label",{children:"PAN Number:"}),(0,t.jsx)("input",{type:"text",value:u,onChange:e=>p(e.target.value.toUpperCase()),placeholder:"Enter PAN number (e.g., ABCDE1234F)",maxLength:"10",className:u.length>0&&10!==u.length?"kyc-modal-error":""}),u.length>0&&10!==u.length&&(0,t.jsx)("span",{className:"kyc-modal-error-text",children:"PAN number must be 10 characters"})]})]}),(!v.trim()||!u.trim())&&(0,t.jsx)("div",{className:"kyc-modal-document-warning",children:"\u26a0\ufe0f Both Aadhar Number and PAN Number are required for KYC approval"})]}),(0,t.jsxs)("div",{className:"kyc-modal-kyc-actions",children:[(0,t.jsx)("h3",{children:"KYC Action"}),(0,t.jsxs)("div",{className:"kyc-modal-action-buttons",children:[(0,t.jsx)("button",{className:"kyc-modal-action-btn "+("approve"===m?"active":""),onClick:()=>h("approve"),disabled:!v.trim()||!u.trim()||12!==v.length||10!==u.length,title:v.trim()&&u.trim()&&12===v.length&&10===u.length?"":"Both Aadhar and PAN numbers must be filled correctly for approval",children:"\u2705 Approve"}),(0,t.jsx)("button",{className:"kyc-modal-action-btn "+("refer-back"===m?"active":""),onClick:()=>h("refer-back"),children:"\ud83d\udcdd Refer Back"}),(0,t.jsx)("button",{className:"kyc-modal-action-btn "+("reject"===m?"active":""),onClick:()=>h("reject"),children:"\u274c Reject"})]}),("reject"===m||"refer-back"===m)&&(0,t.jsxs)("div",{className:"kyc-modal-reason-section",children:[(0,t.jsx)("label",{htmlFor:"reason",children:"Reason:"}),(0,t.jsx)("textarea",{id:"reason",value:d,onChange:e=>o(e.target.value),placeholder:`Enter reason for ${"reject"===m?"rejection":"refer back"}...`,rows:"4",className:"kyc-modal-reason-textarea"})]})]})]}),(0,t.jsxs)("div",{className:"kyc-modal-footer",children:[(0,t.jsx)("button",{className:"kyc-modal-action-btn kyc-modal-secondary",onClick:n,children:"Cancel"}),(0,t.jsx)("button",{className:"kyc-modal-action-btn kyc-modal-primary",onClick:()=>{if(m)if("approve"!==m||v.trim()&&u.trim())if("reject"!==m&&"refer-back"!==m||d.trim()){switch(m){case"approve":l(a.id,{aadharNumber:v,panNumber:u});break;case"reject":c(a.id,d);break;case"refer-back":i(a.id,d)}n()}else alert("Please provide a reason");else alert("Please fill both Aadhar Number and PAN Number before approving");else alert("Please select an action")},disabled:!m||("reject"===m||"refer-back"===m)&&!d.trim()||"approve"===m&&(!v.trim()||!u.trim()||12!==v.length||10!==u.length),children:"Submit Action"})]})]})}):null};var o=a(8022),m=a(2343),h=(a(8756),a(838)),v=a(2064),j=a(476),u=a(7105),p=a(4801);const N=()=>{const e=(0,n.Zp)(),{user:s,logout:a}=(0,l.As)(),[N,x]=(0,r.useState)("overview"),[g,k]=(0,r.useState)([]),[b,y]=(0,r.useState)(!1),[f,C]=(0,r.useState)(!1),[w,A]=(0,r.useState)(null),[E,S]=(0,r.useState)(!1),[R,P]=(0,r.useState)(null),[D,B]=(0,r.useState)(!1),[F,K]=(0,r.useState)(null),[I,Y]=(0,r.useState)(null),[T,M]=(0,r.useState)(!1),[O,G]=(0,r.useState)(!1),[L,$]=(0,r.useState)(null),[J,_]=(0,r.useState)({kycStatus:"",assignedDate:""}),[V,U]=(0,r.useState)(!1);(0,r.useEffect)((()=>{q()}),[]);const q=async()=>{try{if(console.log("\ud83d\udd04 Fetching assigned farmers for employee..."),console.log("\ud83d\udc64 Current user:",s),!s)return console.error("\u274c No user available"),void k([]);const n=(null===s||void 0===s?void 0:s.id)||(null===s||void 0===s?void 0:s.userId)||(null===s||void 0===s?void 0:s.employeeId)||(null===s||void 0===s?void 0:s.contactNumber),l=((null===s||void 0===s?void 0:s.name)||(null===s||void 0===s?void 0:s.fullName)||"").toLowerCase().trim(),c=((null===s||void 0===s?void 0:s.contactNumber)||(null===s||void 0===s?void 0:s.phone)||"").toString();let i=await j.JL.getAssignedFarmers();console.log("\u2705 Employee API response (raw):",i);const t=e=>Array.isArray(e)?e:e&&"object"===typeof e&&(e.assignedFarmers||e.farmers||e.items||e.records||e.content||e.data)||[];let d=t(i);if((!d||0===d.length)&&(console.log("\u2139\ufe0f Fallback #1 adminAPI.getFarmersByEmployee with id:",n),n))try{const e=await j.Er.getFarmersByEmployee(n);console.log("\u2705 Admin fallback #1 response:",e),d=t(e)}catch(e){console.error("\u274c Fallback #1 failed:",e)}if(!d||0===d.length)try{console.log("\u2139\ufe0f Fallback #2 adminAPI.getAllFarmers");const e=await j.Er.getAllFarmers();d=t(e).filter((e=>{const s=(e.assignedEmployee||e.assignedEmployeeName||"").toString().toLowerCase(),a=e.assignedEmployeeId||e.employeeId||e.assignedTo;return l&&s.includes(l)||n&&a==n||c&&s.includes(c)})),console.log("\u2705 Admin fallback #2 filtered count:",d.length)}catch(a){console.error("\u274c Fallback #2 failed:",a)}if(!d||0===d.length)try{console.log("\u2139\ufe0f Fallback #3 farmersAPI.getAllFarmers");const e=await j.xs.getAllFarmers();d=t(e).filter((e=>{const s=(e.assignedEmployee||e.assignedEmployeeName||"").toString().toLowerCase(),a=e.assignedEmployeeId||e.employeeId||e.assignedTo;return l&&s.includes(l)||n&&a==n||c&&s.includes(c)})),console.log("\u2705 Super-admin fallback filtered count:",d.length)}catch(r){console.error("\u274c Fallback #3 failed:",r)}const o=e=>null===e||void 0===e?"":String(e),m=(d||[]).map((e=>{const a=e.name||e.fullName||[e.firstName,e.lastName].filter(Boolean).join(" "),r=e.contactNumber||e.phone||e.mobile||e.mobileNumber,n=e.state||e.addressState||e.stateName,l=e.district||e.addressDistrict||e.districtName,c=e.kycStatus||e.status||"PENDING",i=e.kycReviewedDate||e.kycSubmittedDate||e.updatedAt||e.createdAt;return{id:e.id||e.farmerId||e.uuid||o(a)+o(r),name:a||"N/A",phone:r||"N/A",state:n||"N/A",district:l||"N/A",location:`${l||"N/A"}, ${n||"N/A"}`,kycStatus:c,lastAction:i?o(i).substring(0,10):(new Date).toISOString().split("T")[0],notes:`KYC Status: ${c}`,assignedEmployee:e.assignedEmployee||e.assignedEmployeeName||s.name||"Employee"}}));k(m),console.log("\u2705 Assigned farmers loaded:",m.length)}catch(n){console.error("\u274c Error fetching assigned farmers:",n),k([])}},H=()=>({totalAssigned:g.length,approved:g.filter((e=>"APPROVED"===e.kycStatus)).length,pending:g.filter((e=>"PENDING"===e.kycStatus)).length,referBack:g.filter((e=>"REFER_BACK"===e.kycStatus)).length,rejected:g.filter((e=>"REJECTED"===e.kycStatus)).length}),W=()=>({newAssignments:g.filter((e=>{const s=new Date(e.assignedDate);return(new Date-s)/864e5<=3&&"PENDING"===e.kycStatus})),pendingReviews:g.filter((e=>"PENDING"===e.kycStatus)),referBackCases:g.filter((e=>"REFER_BACK"===e.kycStatus))}),Z=async function(e,a){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;try{console.log(`\ud83d\udd04 Updating KYC status for farmer ${e} to ${a}`);const l={reason:r,updatedBy:(null===s||void 0===s?void 0:s.name)||"Employee",updatedAt:(new Date).toISOString(),...n&&{aadharNumber:n.aadharNumber,panNumber:n.panNumber}};let c;switch(console.log("\ud83d\udccb Approval data:",l),a){case"APPROVED":default:c=await j.kM.approveKYC(e,l);break;case"REJECTED":c=await j.kM.rejectKYC(e,l);break;case"REFER_BACK":c=await j.kM.referBackKYC(e,l)}console.log("\u2705 KYC API response:",c),k((l=>l.map((l=>l.id===e?{...l,kycStatus:a,lastAction:(new Date).toISOString().split("T")[0],notes:r||`Status updated to ${a} by ${(null===s||void 0===s?void 0:s.name)||"Employee"}`,...n&&{aadharNumber:n.aadharNumber,panNumber:n.panNumber}}:l)))),alert(`KYC status updated to ${a} successfully!`),window.dispatchEvent(new CustomEvent("kycStatusUpdated",{detail:{farmerId:e,newStatus:a,reason:r,documents:n}}))}catch(c){var l;console.error("\u274c Error updating KYC status:",c),alert(`Failed to update KYC status: ${(null===(l=c.response)||void 0===l?void 0:l.data)||c.message}`)}},z=e=>{P(e),S(!0)},Q=e=>{Y(e),y(!0)};return(0,t.jsxs)("div",{className:"dashboard",children:[(0,t.jsxs)("div",{className:"top-bar",children:[(0,t.jsxs)("div",{className:"top-bar-left",children:[(0,t.jsx)("div",{className:"logo-container",children:(0,t.jsxs)("div",{className:"logo-text",children:[(0,t.jsx)("h1",{className:"logo-title",children:"DATE"}),(0,t.jsx)("p",{className:"logo-subtitle",children:"Digital Agristack Transaction Enterprises"})]})}),(0,t.jsx)("div",{className:"date-display",children:(new Date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),(0,t.jsxs)("div",{className:"top-bar-right",children:[(0,t.jsx)(c.A,{}),(0,t.jsx)(v.A,{onLogout:()=>{a()},onShowChangePassword:()=>M(!0),onShowChangeUserId:()=>G(!0)})]})]}),(0,t.jsxs)("aside",{className:"dashboard-sidebar",children:[(0,t.jsx)("div",{className:"sidebar-header",children:(0,t.jsxs)("div",{className:"logo",children:[(0,t.jsx)("div",{className:"logo-text",children:"Welcome !!!"}),(0,t.jsx)("div",{className:"logo-subtitle",children:"Employee"})]})}),(0,t.jsxs)("nav",{className:"sidebar-nav",children:[(0,t.jsx)("button",{className:"nav-item "+("overview"===N?"active":""),onClick:()=>x("overview"),children:"\ud83d\udcca Overview"}),(0,t.jsx)("button",{className:"nav-item "+("farmers"===N?"active":""),onClick:()=>x("farmers"),children:"\ud83d\udc68\u200d\ud83c\udf3e Assigned Farmers"}),(0,t.jsx)("button",{className:"nav-item "+("progress"===N?"active":""),onClick:()=>x("progress"),children:"\ud83d\udcc8 KYC Progress"}),(0,t.jsx)("button",{className:"nav-item "+("todo"===N?"active":""),onClick:()=>x("todo"),children:"\ud83d\udccb To-Do List"}),(0,t.jsx)("button",{className:"nav-item "+("kyc-summary"===N?"active":""),onClick:()=>x("kyc-summary"),children:"\ud83d\udcdd KYC Summary"}),(0,t.jsx)("button",{className:"nav-item",onClick:()=>e("/analytical-dashboard"),children:"\ud83d\udcc8 Dashboard"})]})]}),(0,t.jsx)("div",{className:"dashboard-main",children:(0,t.jsxs)("div",{className:"dashboard-content",children:["overview"===N&&!(b||f||E||D||T||O)&&(0,t.jsx)("header",{className:"dashboard-header",children:(0,t.jsx)("div",{className:"header-center",children:(0,t.jsxs)("div",{className:"welcome-message",children:[(0,t.jsxs)("h2",{className:"greeting",children:[(()=>{const e=(new Date).getHours();return e>=5&&e<12?"Good Morning":e>=12&&e<17?"Good Afternoon":e>=17&&e<21?"Good Evening":"Good Night"})(),", ",(null===s||void 0===s?void 0:s.name)||(null===s||void 0===s?void 0:s.email)||"Employee","! \ud83c\udf8b"]}),(0,t.jsx)("p",{className:"welcome-text",children:"Manage your assigned farmers and KYC verification tasks efficiently."})]})})}),T&&s&&(0,t.jsx)("div",{className:"dashboard-form-container",children:(0,t.jsx)(u.A,{user:s,isOpen:!0,isInDashboard:!0,onClose:()=>M(!1),onSuccess:()=>{$("Password changed successfully!"),M(!1),setTimeout((()=>$(null)),3e3)}})}),O&&s&&(0,t.jsx)("div",{className:"dashboard-form-container",children:(0,t.jsx)(p.A,{user:s,isOpen:!0,isInDashboard:!0,onClose:()=>G(!1),onSuccess:()=>{$("User ID changed successfully!"),G(!1),setTimeout((()=>$(null)),3e3)}})}),b?(0,t.jsx)("div",{className:"dashboard-form-container",children:(0,t.jsx)(i.A,{isInDashboard:!0,editData:I,onClose:()=>{y(!1),Y(null)},onSubmit:async e=>{try{k((s=>[...s,{...e,id:Date.now()}])),y(!1),Y(null),alert("Farmer saved successfully!")}catch(s){console.error("Error saving farmer:",s),alert("Failed to save farmer. Please try again.")}}})}):(0,t.jsxs)(t.Fragment,{children:["overview"===N&&(()=>{const e=H(),s=W();return(0,t.jsxs)("div",{className:"overview-section",children:[(0,t.jsxs)("div",{className:"overview-header",children:[(0,t.jsx)("h2",{className:"overview-title",children:"Employee Dashboard Overview"}),(0,t.jsx)("p",{className:"overview-description",children:"Manage your assigned farmers and KYC verification tasks efficiently."})]}),(0,t.jsxs)("div",{className:"stats-grid",children:[(0,t.jsxs)("div",{className:"stats-card assigned",children:[(0,t.jsx)("h3",{className:"stats-title",children:"Total Assigned"}),(0,t.jsx)("div",{className:"stats-number",children:e.totalAssigned})]}),(0,t.jsxs)("div",{className:"stats-card approved",children:[(0,t.jsx)("h3",{className:"stats-title",children:"Approved"}),(0,t.jsx)("div",{className:"stats-number",children:e.approved})]}),(0,t.jsxs)("div",{className:"stats-card pending",children:[(0,t.jsx)("h3",{className:"stats-title",children:"Pending"}),(0,t.jsx)("div",{className:"stats-number",children:e.pending})]}),(0,t.jsxs)("div",{className:"stats-card refer",children:[(0,t.jsx)("h3",{className:"stats-title",children:"Refer Back"}),(0,t.jsx)("div",{className:"stats-number",children:e.referBack})]})]}),(0,t.jsxs)("div",{className:"kyc-progress-section",children:[(0,t.jsx)("h3",{children:"KYC Progress Summary"}),(0,t.jsxs)("div",{className:"kyc-progress-grid",children:[(0,t.jsx)("div",{className:"progress-card approved",children:(0,t.jsxs)("div",{className:"progress-circle",children:[(0,t.jsx)("span",{className:"progress-number",children:e.approved}),(0,t.jsx)("span",{className:"progress-label",children:"Approved"})]})}),(0,t.jsx)("div",{className:"progress-card pending",children:(0,t.jsxs)("div",{className:"progress-circle",children:[(0,t.jsx)("span",{className:"progress-number",children:e.pending}),(0,t.jsx)("span",{className:"progress-label",children:"Pending"})]})}),(0,t.jsx)("div",{className:"progress-card refer-back",children:(0,t.jsxs)("div",{className:"progress-circle",children:[(0,t.jsx)("span",{className:"progress-number",children:e.referBack}),(0,t.jsx)("span",{className:"progress-label",children:"Refer Back"})]})}),(0,t.jsx)("div",{className:"progress-card rejected",children:(0,t.jsxs)("div",{className:"progress-circle",children:[(0,t.jsx)("span",{className:"progress-number",children:e.rejected}),(0,t.jsx)("span",{className:"progress-label",children:"Rejected"})]})})]})]}),(0,t.jsxs)("div",{className:"todo-section",children:[(0,t.jsx)("h3",{children:"To-Do List"}),(0,t.jsxs)("div",{className:"todo-grid",children:[(0,t.jsxs)("div",{className:"todo-card high-priority",children:[(0,t.jsx)("h4",{children:"New Assignments"}),(0,t.jsxs)("p",{children:[s.newAssignments.length," new farmers assigned"]}),(0,t.jsx)("button",{className:"action-btn-small primary",onClick:()=>x("farmers"),children:"Review New"})]}),(0,t.jsxs)("div",{className:"todo-card medium-priority",children:[(0,t.jsx)("h4",{children:"Pending Reviews"}),(0,t.jsxs)("p",{children:[s.pendingReviews.length," cases pending"]}),(0,t.jsx)("button",{className:"action-btn-small warning",onClick:()=>x("farmers"),children:"Process Pending"})]}),(0,t.jsxs)("div",{className:"todo-card urgent-priority",children:[(0,t.jsx)("h4",{children:"Refer Back Cases"}),(0,t.jsxs)("p",{children:[s.referBackCases.length," need attention"]}),(0,t.jsx)("button",{className:"action-btn-small info",onClick:()=>x("farmers"),children:"Review Refer Back"})]})]})]})]})})(),"farmers"===N&&(()=>{const e=g.filter((e=>{const s=!J.kycStatus||e.kycStatus===J.kycStatus,a=!J.assignedDate||e.assignedDate===J.assignedDate;return s&&a}));return(0,t.jsx)("div",{className:"overview-section",children:E?(0,t.jsxs)("div",{className:"farmer-details-section",children:[(0,t.jsxs)("div",{className:"section-header",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"section-title",children:"Farmer Details"}),(0,t.jsxs)("p",{className:"section-description",children:["View detailed information for ",(null===R||void 0===R?void 0:R.name)||"selected farmer","."]})]}),(0,t.jsx)("div",{className:"section-actions",children:(0,t.jsxs)("button",{className:"action-btn-small secondary",onClick:()=>S(!1),children:[(0,t.jsx)("i",{className:"fas fa-arrow-left"}),"Back to Farmers"]})})]}),(0,t.jsx)(o.A,{isInDashboard:!0,farmerData:R,onClose:()=>S(!1)})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"overview-header",children:[(0,t.jsx)("h2",{className:"overview-title",children:"Assigned Farmers"}),(0,t.jsx)("p",{className:"overview-description",children:"View and manage your assigned farmers with KYC verification tasks."}),(0,t.jsx)("div",{className:"overview-actions",children:(0,t.jsx)("button",{className:"action-btn primary",onClick:()=>y(!0),children:"Add Farmer"})})]}),(0,t.jsxs)("div",{className:"filters-section",children:[(0,t.jsxs)("select",{value:J.kycStatus,onChange:e=>_((s=>({...s,kycStatus:e.target.value}))),className:"filter-select",children:[(0,t.jsx)("option",{value:"",children:"All KYC Status"}),(0,t.jsx)("option",{value:"APPROVED",children:"Approved"}),(0,t.jsx)("option",{value:"PENDING",children:"Pending"}),(0,t.jsx)("option",{value:"REFER_BACK",children:"Refer Back"}),(0,t.jsx)("option",{value:"REJECTED",children:"Rejected"})]}),(0,t.jsxs)("select",{value:J.assignedDate,onChange:e=>_((s=>({...s,assignedDate:e.target.value}))),className:"filter-select",children:[(0,t.jsx)("option",{value:"",children:"All Assignment Dates"}),(0,t.jsx)("option",{value:"2024-01-15",children:"Jan 15, 2024"}),(0,t.jsx)("option",{value:"2024-01-18",children:"Jan 18, 2024"}),(0,t.jsx)("option",{value:"2024-01-20",children:"Jan 20, 2024"}),(0,t.jsx)("option",{value:"2024-01-25",children:"Jan 25, 2024"})]})]}),(0,t.jsx)("div",{className:"kyc-tabs-section",children:(0,t.jsxs)("div",{className:"kyc-tabs",children:[(0,t.jsxs)("button",{className:"kyc-tab "+(""===J.kycStatus?"active":""),onClick:()=>_((e=>({...e,kycStatus:""}))),children:[(0,t.jsx)("span",{className:"tab-icon",children:"\ud83d\udcca"}),(0,t.jsx)("span",{className:"tab-label",children:"All"}),(0,t.jsx)("span",{className:"tab-count",children:e.length})]}),(0,t.jsxs)("button",{className:"kyc-tab approved "+("APPROVED"===J.kycStatus?"active":""),onClick:()=>_((e=>({...e,kycStatus:"APPROVED"}))),children:[(0,t.jsx)("span",{className:"tab-icon",children:"\u2705"}),(0,t.jsx)("span",{className:"tab-label",children:"Approved"}),(0,t.jsx)("span",{className:"tab-count",children:e.filter((e=>"APPROVED"===e.kycStatus)).length})]}),(0,t.jsxs)("button",{className:"kyc-tab pending "+("PENDING"===J.kycStatus?"active":""),onClick:()=>_((e=>({...e,kycStatus:"PENDING"}))),children:[(0,t.jsx)("span",{className:"tab-icon",children:"\u23f3"}),(0,t.jsx)("span",{className:"tab-label",children:"Pending"}),(0,t.jsx)("span",{className:"tab-count",children:e.filter((e=>"PENDING"===e.kycStatus)).length})]}),(0,t.jsxs)("button",{className:"kyc-tab rejected "+("REJECTED"===J.kycStatus?"active":""),onClick:()=>_((e=>({...e,kycStatus:"REJECTED"}))),children:[(0,t.jsx)("span",{className:"tab-icon",children:"\u274c"}),(0,t.jsx)("span",{className:"tab-label",children:"Rejected"}),(0,t.jsx)("span",{className:"tab-count",children:e.filter((e=>"REJECTED"===e.kycStatus)).length})]})]})}),(0,t.jsx)(h.A,{data:e,columns:[{key:"name",label:"Name"},{key:"phone",label:"Phone"},{key:"location",label:"Location"},{key:"assignedDate",label:"Assigned Date"},{key:"kycStatus",label:"KYC Status"},{key:"lastAction",label:"Last Action"}],customActions:[{label:"View",icon:"\ud83d\udc41\ufe0f",className:"info",onClick:z},{label:"Edit",icon:"\u270f\ufe0f",className:"primary",onClick:Q},{label:"KYC",icon:"\ud83d\udccb",className:"warning",onClick:e=>{A(e),C(!0)}},{label:"Approve",icon:"\u2705",className:"success",onClick:e=>Z(e.id,"APPROVED"),showCondition:e=>"PENDING"===e.kycStatus||"REFER_BACK"===e.kycStatus},{label:"Refer Back",icon:"\ud83d\udd04",className:"warning",onClick:e=>{const s=prompt("Enter reason for refer back:");s&&Z(e.id,"REFER_BACK",s)},showCondition:e=>"PENDING"===e.kycStatus},{label:"Reject",icon:"\u274c",className:"danger",onClick:e=>{const s=prompt("Enter reason for rejection:");s&&Z(e.id,"REJECTED",s)},showCondition:e=>"PENDING"===e.kycStatus||"REFER_BACK"===e.kycStatus}]})]})})})(),"progress"===N&&(()=>{const e=H(),s=e.totalAssigned,a=s>0?Math.round(e.approved/s*100):0,r=s>0?Math.round(e.pending/s*100):0,n=s>0?Math.round(e.referBack/s*100):0,l=s>0?Math.round(e.rejected/s*100):0;return(0,t.jsxs)("div",{className:"overview-section",children:[(0,t.jsxs)("div",{className:"overview-header",children:[(0,t.jsx)("h2",{className:"overview-title",children:"KYC Progress Tracking"}),(0,t.jsx)("p",{className:"overview-description",children:"Monitor your KYC verification progress and performance metrics."})]}),(0,t.jsx)("div",{className:"progress-overview",children:(0,t.jsx)("div",{className:"progress-stats",children:(0,t.jsxs)("div",{className:"progress-stat",children:[(0,t.jsx)("h3",{children:"Overall Progress"}),(0,t.jsxs)("div",{className:"progress-bar",children:[(0,t.jsx)("div",{className:"progress-fill approved",style:{width:`${a}%`}}),(0,t.jsx)("div",{className:"progress-fill pending",style:{width:`${r}%`}}),(0,t.jsx)("div",{className:"progress-fill refer-back",style:{width:`${n}%`}}),(0,t.jsx)("div",{className:"progress-fill rejected",style:{width:`${l}%`}})]}),(0,t.jsxs)("div",{className:"progress-labels",children:[(0,t.jsxs)("span",{children:["Approved: ",a,"%"]}),(0,t.jsxs)("span",{children:["Pending: ",r,"%"]}),(0,t.jsxs)("span",{children:["Refer Back: ",n,"%"]}),(0,t.jsxs)("span",{children:["Rejected: ",l,"%"]})]})]})})}),(0,t.jsxs)("div",{className:"detailed-stats",children:[(0,t.jsxs)("div",{className:"stat-card approved",children:[(0,t.jsx)("h4",{children:"Approved Cases"}),(0,t.jsxs)("div",{className:"stat-content",children:[(0,t.jsx)("span",{className:"stat-number",children:e.approved}),(0,t.jsxs)("span",{className:"stat-percentage",children:[a,"%"]})]})]}),(0,t.jsxs)("div",{className:"stat-card pending",children:[(0,t.jsx)("h4",{children:"Pending Cases"}),(0,t.jsxs)("div",{className:"stat-content",children:[(0,t.jsx)("span",{className:"stat-number",children:e.pending}),(0,t.jsxs)("span",{className:"stat-percentage",children:[r,"%"]})]})]}),(0,t.jsxs)("div",{className:"stat-card refer-back",children:[(0,t.jsx)("h4",{children:"Refer Back Cases"}),(0,t.jsxs)("div",{className:"stat-content",children:[(0,t.jsx)("span",{className:"stat-number",children:e.referBack}),(0,t.jsxs)("span",{className:"stat-percentage",children:[n,"%"]})]})]}),(0,t.jsxs)("div",{className:"stat-card rejected",children:[(0,t.jsx)("h4",{children:"Rejected Cases"}),(0,t.jsxs)("div",{className:"stat-content",children:[(0,t.jsx)("span",{className:"stat-number",children:e.rejected}),(0,t.jsxs)("span",{className:"stat-percentage",children:[l,"%"]})]})]})]})]})})(),"todo"===N&&(()=>{const e=W();return(0,t.jsxs)("div",{className:"overview-section",children:[(0,t.jsxs)("div",{className:"overview-header",children:[(0,t.jsx)("h2",{className:"overview-title",children:"To-Do List"}),(0,t.jsx)("p",{className:"overview-description",children:"Manage your daily tasks and priorities for KYC verification."})]}),(0,t.jsxs)("div",{className:"todo-grid",children:[(0,t.jsxs)("div",{className:"todo-card high-priority",children:[(0,t.jsx)("div",{className:"priority-badge high",children:"High Priority"}),(0,t.jsx)("h4",{children:"New KYC Reviews"}),(0,t.jsxs)("p",{children:[e.newAssignments.length," new farmers need KYC verification"]}),(0,t.jsx)("button",{className:"action-btn-small primary",onClick:()=>x("farmers"),children:"Review Now"})]}),(0,t.jsxs)("div",{className:"todo-card medium-priority",children:[(0,t.jsx)("div",{className:"priority-badge medium",children:"Medium Priority"}),(0,t.jsx)("h4",{children:"Pending Reviews"}),(0,t.jsxs)("p",{children:[e.pendingReviews.length," cases awaiting your review"]}),(0,t.jsx)("button",{className:"action-btn-small warning",onClick:()=>x("farmers"),children:"Process Pending"})]}),(0,t.jsxs)("div",{className:"todo-card urgent-priority",children:[(0,t.jsx)("div",{className:"priority-badge urgent",children:"Urgent"}),(0,t.jsx)("h4",{children:"Refer Back Cases"}),(0,t.jsxs)("p",{children:[e.referBackCases.length," cases need immediate attention"]}),(0,t.jsx)("button",{className:"action-btn-small danger",onClick:()=>x("farmers"),children:"Review Urgent"})]})]}),(0,t.jsxs)("div",{className:"task-summary",children:[(0,t.jsx)("h3",{children:"Task Summary"}),(0,t.jsxs)("div",{className:"task-stats",children:[(0,t.jsxs)("div",{className:"task-stat assignments",children:[(0,t.jsx)("span",{className:"task-number",children:e.newAssignments.length}),(0,t.jsx)("span",{className:"task-label",children:"New Assignments"})]}),(0,t.jsxs)("div",{className:"task-stat pending",children:[(0,t.jsx)("span",{className:"task-number",children:e.pendingReviews.length}),(0,t.jsx)("span",{className:"task-label",children:"Pending Reviews"})]}),(0,t.jsxs)("div",{className:"task-stat referback",children:[(0,t.jsx)("span",{className:"task-number",children:e.referBackCases.length}),(0,t.jsx)("span",{className:"task-label",children:"Refer Back"})]})]})]})]})})(),"kyc-summary"===N&&(()=>{const e=H();return(0,t.jsxs)("div",{className:"overview-section",children:[(0,t.jsxs)("div",{className:"overview-header",children:[(0,t.jsx)("h2",{className:"overview-title",children:"KYC Summary"}),(0,t.jsx)("p",{className:"overview-description",children:"Comprehensive overview of your KYC verification activities and performance."})]}),(0,t.jsxs)("div",{className:"kyc-stats-grid",children:[(0,t.jsxs)("div",{className:"kyc-stat-card approved",children:[(0,t.jsx)("div",{className:"kyc-stat-icon",children:"\u2705"}),(0,t.jsxs)("div",{className:"kyc-stat-content",children:[(0,t.jsx)("span",{className:"kyc-stat-number",children:e.approved}),(0,t.jsx)("span",{className:"kyc-stat-label",children:"Approved"})]})]}),(0,t.jsxs)("div",{className:"kyc-stat-card pending",children:[(0,t.jsx)("div",{className:"kyc-stat-icon",children:"\u23f3"}),(0,t.jsxs)("div",{className:"kyc-stat-content",children:[(0,t.jsx)("span",{className:"kyc-stat-number",children:e.pending}),(0,t.jsx)("span",{className:"kyc-stat-label",children:"Pending"})]})]}),(0,t.jsxs)("div",{className:"kyc-stat-card refer-back",children:[(0,t.jsx)("div",{className:"kyc-stat-icon",children:"\ud83d\udcdd"}),(0,t.jsxs)("div",{className:"kyc-stat-content",children:[(0,t.jsx)("span",{className:"kyc-stat-number",children:e.referBack}),(0,t.jsx)("span",{className:"kyc-stat-label",children:"Refer Back"})]})]}),(0,t.jsxs)("div",{className:"kyc-stat-card rejected",children:[(0,t.jsx)("div",{className:"kyc-stat-icon",children:"\u274c"}),(0,t.jsxs)("div",{className:"kyc-stat-content",children:[(0,t.jsx)("span",{className:"kyc-stat-number",children:e.rejected}),(0,t.jsx)("span",{className:"kyc-stat-label",children:"Rejected"})]})]})]}),(0,t.jsxs)("div",{className:"kyc-performance",children:[(0,t.jsx)("h3",{children:"Performance Metrics"}),(0,t.jsxs)("div",{className:"performance-metrics",children:[(0,t.jsxs)("div",{className:"metric-card rate",children:[(0,t.jsx)("h4",{children:"Approval Rate"}),(0,t.jsxs)("span",{className:"metric-value",children:[e.totalAssigned>0?Math.round(e.approved/e.totalAssigned*100):0,"%"]})]}),(0,t.jsxs)("div",{className:"metric-card time",children:[(0,t.jsx)("h4",{children:"Processing Time"}),(0,t.jsx)("span",{className:"metric-value",children:"2.3 days"})]}),(0,t.jsxs)("div",{className:"metric-card success",children:[(0,t.jsx)("h4",{children:"Success Rate"}),(0,t.jsxs)("span",{className:"metric-value",children:[e.totalAssigned>0?Math.round((e.approved+e.pending)/e.totalAssigned*100):0,"%"]})]})]})]})]})})()]}),L&&(0,t.jsx)("div",{className:"notification-toast",children:L})]})}),f&&w&&(0,t.jsx)(d,{farmer:w,onClose:()=>{C(!1),A(null)},onApprove:(e,s)=>Z(e,"APPROVED","",s),onReject:(e,s)=>Z(e,"REJECTED",s),onReferBack:(e,s)=>Z(e,"REFER_BACK",s)}),D&&F&&(0,t.jsx)(m.A,{employee:F,onClose:()=>{B(!1),K(null)},onUpdate:e=>{B(!1),K(null)}})]})}},8756:(e,s,a)=>{a(5043),a(579)}}]);
//# sourceMappingURL=180.b1fc38fe.chunk.js.map