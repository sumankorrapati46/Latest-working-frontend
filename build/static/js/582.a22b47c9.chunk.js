"use strict";(self.webpackChunkagristack_farmer_management=self.webpackChunkagristack_farmer_management||[]).push([[582],{2582:(e,s,a)=>{a.r(s),a.d(s,{default:()=>A});var t=a(5043),l=a(3216),n=a(5016),r=a(3005);var i=a(476),o=a(838),c=a(3028),d=a(3498);var m=a(579);const u=e=>{let{onSearch:s,onFilter:a,filters:l=[],placeholder:n="Search...",showAdvancedFilters:r=!1,className:i=""}=e;const[o,c]=(0,t.useState)(""),[d,u]=(0,t.useState)({}),[h,g]=(0,t.useState)(!1),v=((e,s)=>{const[a,l]=(0,t.useState)(e);return(0,t.useEffect)((()=>{const a=setTimeout((()=>{l(e)}),s);return()=>{clearTimeout(a)}}),[e,s]),a})(o,300),p=(0,t.useCallback)((e=>{c(e.target.value)}),[]),N=(0,t.useCallback)(((e,s)=>{const t={...d,[e]:s};s&&""!==s||delete t[e],u(t),null===a||void 0===a||a(t)}),[d,a]),y=(0,t.useCallback)((e=>{e.preventDefault(),null===s||void 0===s||s(v)}),[v,s]),b=(0,t.useCallback)((()=>{u({}),c(""),null===a||void 0===a||a({}),null===s||void 0===s||s("")}),[a,s]),x=Object.keys(d).length+(o?1:0);return(0,m.jsxs)("div",{className:`search-filter-container ${i}`,children:[(0,m.jsxs)("form",{onSubmit:y,className:"search-form",children:[(0,m.jsxs)("div",{className:"search-input-group",children:[(0,m.jsx)("input",{type:"text",value:o,onChange:p,placeholder:n,className:"search-input"}),(0,m.jsx)("button",{type:"submit",className:"search-button",children:"\ud83d\udd0d"})]}),l.length>0&&(0,m.jsxs)("button",{type:"button",onClick:()=>g(!h),className:"filter-toggle "+(h?"active":""),children:["Filters ",x>0&&`(${x})`]})]}),h&&l.length>0&&(0,m.jsxs)("div",{className:"filters-panel",children:[(0,m.jsx)("div",{className:"filters-grid",children:l.map((e=>{var s;return(0,m.jsxs)("div",{className:"filter-group",children:[(0,m.jsx)("label",{className:"filter-label",children:e.label}),"select"===e.type?(0,m.jsxs)("select",{value:d[e.key]||"",onChange:s=>N(e.key,s.target.value),className:"filter-select",children:[(0,m.jsxs)("option",{value:"",children:["All ",e.label]}),null===(s=e.options)||void 0===s?void 0:s.map((e=>(0,m.jsx)("option",{value:e.value,children:e.label},e.value)))]}):"date"===e.type?(0,m.jsx)("input",{type:"date",value:d[e.key]||"",onChange:s=>N(e.key,s.target.value),className:"filter-input"}):(0,m.jsx)("input",{type:"text",value:d[e.key]||"",onChange:s=>N(e.key,s.target.value),placeholder:`Filter by ${e.label}`,className:"filter-input"})]},e.key)}))}),(0,m.jsx)("div",{className:"filter-actions",children:(0,m.jsx)("button",{type:"button",onClick:b,className:"clear-filters-btn",children:"Clear All"})})]})]})};var h=a(8874),g=(a(1953),a(9764)),v=a(8022),p=a(4499),N=a(6428),y=a(2343),b=a(2383),x=a(1125);const j=e=>{let{item:s,type:a,onClose:l,onConfirm:n}=e;const[r,i]=(0,t.useState)(""),[o,c]=(0,t.useState)(!1),d=()=>"farmer"===a?(null===s||void 0===s?void 0:s.name)||"Farmer":"employee"===a?(null===s||void 0===s?void 0:s.name)||"Employee":"Item",u="farmer"===a?{name:null===s||void 0===s?void 0:s.name,phone:null===s||void 0===s?void 0:s.phone,state:null===s||void 0===s?void 0:s.state,district:null===s||void 0===s?void 0:s.district}:"employee"===a?{name:null===s||void 0===s?void 0:s.name,email:null===s||void 0===s?void 0:s.email,phone:null===s||void 0===s?void 0:s.phone,designation:null===s||void 0===s?void 0:s.designation}:{};return(0,m.jsx)("div",{className:"delete-modal-overlay",children:(0,m.jsxs)("div",{className:"delete-modal-content",children:[(0,m.jsxs)("div",{className:"delete-modal-header",children:[(0,m.jsx)("h2",{children:"Confirm Delete"}),(0,m.jsx)("button",{className:"delete-modal-close-btn",onClick:l,children:"\xd7"})]}),(0,m.jsxs)("div",{className:"delete-modal-warning",children:[(0,m.jsx)("div",{className:"delete-modal-warning-icon",children:"\u26a0\ufe0f"}),(0,m.jsxs)("h3",{children:["Are you sure you want to delete this ",a,"?"]}),(0,m.jsx)("p",{children:"This action cannot be undone."})]}),(0,m.jsxs)("div",{className:"delete-modal-item-details",children:[(0,m.jsxs)("h4",{children:[d()," Details:"]}),(0,m.jsx)("div",{className:"delete-modal-details-grid",children:Object.entries(u).map((e=>{let[s,a]=e;return(0,m.jsxs)("div",{className:"delete-modal-detail-item",children:[(0,m.jsxs)("span",{className:"delete-modal-label",children:[s.charAt(0).toUpperCase()+s.slice(1),":"]}),(0,m.jsx)("span",{className:"delete-modal-value",children:a||"N/A"})]},s)}))})]}),(0,m.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),c(!0);try{await n({...s,reason:r}),l()}catch(a){console.error("Error deleting item:",a)}finally{c(!1)}},className:"delete-modal-form",children:[(0,m.jsxs)("div",{className:"delete-modal-form-group",children:[(0,m.jsx)("label",{htmlFor:"reason",children:"Reason for Deletion (Optional)"}),(0,m.jsx)("textarea",{id:"reason",value:r,onChange:e=>i(e.target.value),placeholder:"Enter reason for deletion...",rows:"3"})]}),(0,m.jsxs)("div",{className:"delete-modal-form-actions",children:[(0,m.jsx)("button",{type:"button",className:"delete-modal-btn-secondary",onClick:l,children:"Cancel"}),(0,m.jsx)("button",{type:"submit",className:"delete-modal-btn-danger",disabled:o,children:o?"Deleting...":`Delete ${d()}`})]})]})]})})};var f=a(2064),k=a(7105),S=a(4801);a(6980);const A=()=>{const e=(0,l.Zp)(),{user:s,logout:a}=(0,n.As)(),{currentTheme:A,getThemeLabel:C}=(0,r.DP)(),{loading:w,error:E,executeApiCall:D}=(()=>{const[e,s]=(0,t.useState)(!1),[a,l]=(0,t.useState)(null),n=(0,t.useRef)(new Map),r=(0,t.useRef)(null);return{loading:e,error:a,executeApiCall:(0,t.useCallback)((async function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{cacheKey:t=null,cacheTime:i=3e5,skipCache:o=!1,showError:c=!0,onSuccess:d=null,onError:m=null}=a;if(r.current&&r.current.abort(),r.current=new AbortController,t&&!o){const e=n.current.get(t);if(e&&Date.now()-e.timestamp<i)return e.data}s(!0),l(null);try{const s=await e(r.current.signal);return t&&n.current.set(t,{data:s,timestamp:Date.now()}),d&&d(s),s}catch(g){var u,h;if("AbortError"===g.name)return;const e=(null===(u=g.response)||void 0===u||null===(h=u.data)||void 0===h?void 0:h.message)||g.message||"An error occurred";throw l(e),m&&m(g),c&&console.error("API Error:",g),g}finally{s(!1)}}),[]),clearCache:(0,t.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e?n.current.delete(e):n.current.clear()}),[]),cancelRequest:(0,t.useCallback)((()=>{r.current&&r.current.abort()}),[])}})(),[T,F]=(0,t.useState)([]),[R,I]=(0,t.useState)([]),[P,O]=(0,t.useState)([]),[K,M]=(0,t.useState)(""),[G,L]=(0,t.useState)({}),[U,$]=(0,t.useState)("overview"),[Y,q]=(0,t.useState)(!1),[V,W]=(0,t.useState)(!1),[_,J]=(0,t.useState)(null),[B,H]=(0,t.useState)(!1),[z,Q]=(0,t.useState)(null),[Z,X]=(0,t.useState)(!1),[ee,se]=(0,t.useState)(!1),[ae,te]=(0,t.useState)(null),[le,ne]=(0,t.useState)(!1),[re,ie]=(0,t.useState)(null),[oe,ce]=(0,t.useState)(!1),[de,me]=(0,t.useState)(null),[ue,he]=(0,t.useState)(!1),[ge,ve]=(0,t.useState)(null),[pe,Ne]=(0,t.useState)(!1),[ye,be]=(0,t.useState)(null),[xe,je]=(0,t.useState)(!1),[fe,ke]=(0,t.useState)(!1),[Se,Ae]=(0,t.useState)(null),[Ce,we]=(0,t.useState)(null),[Ee,De]=(0,t.useState)(!1),[Te,Fe]=(0,t.useState)(null),[Re,Ie]=(0,t.useState)(!1),[Pe,Oe]=(0,t.useState)(!1),[Ke,Me]=(0,t.useState)(null),Ge=(0,t.useCallback)((()=>{const e=(new Date).getHours();return e>=5&&e<12?"Good Morning":e>=12&&e<17?"Good Afternoon":e>=17&&e<21?"Good Evening":"Good Night"}),[]),Le=(0,t.useMemo)((()=>({totalFarmers:T.length,totalEmployees:R.length,totalRegistrations:P.length,pendingRegistrations:P.filter((e=>"PENDING"===e.status)).length,approvedRegistrations:P.filter((e=>"APPROVED"===e.status)).length,rejectedRegistrations:P.filter((e=>"REJECTED"===e.status)).length,farmersWithKYC:T.filter((e=>"APPROVED"===e.kycStatus)).length,farmersPendingKYC:T.filter((e=>"PENDING"===e.kycStatus)).length})),[T,R,P]),Ue=(0,t.useCallback)((()=>{const e=localStorage.getItem("token"),s=localStorage.getItem("user");if(console.log("\ud83d\udd0d Debug Auth State:"),console.log("Token exists:",!!e),console.log("User exists:",!!s),console.log("Token length:",(null===e||void 0===e?void 0:e.length)||0),console.log("User data:",s?JSON.parse(s):null),console.log("AuthContext user:",s),console.log("AuthContext isAuthenticated:",null===s||void 0===s?void 0:s.isAuthenticated),e)try{const s=JSON.parse(atob(e.split(".")[1]));console.log("JWT Payload:",s),console.log("JWT Expiration:",new Date(1e3*s.exp)),console.log("JWT Issued at:",new Date(1e3*s.iat))}catch(a){console.log("JWT decode failed:",a.message)}}),[s]),$e=(0,t.useCallback)((()=>{console.log("\ud83e\uddf9 Clearing all tokens and user data..."),localStorage.removeItem("token"),localStorage.removeItem("user"),sessionStorage.clear(),alert("All tokens cleared! Please log in again."),window.location.href="/login"}),[]),Ye=(0,t.useCallback)((async()=>{console.log("\ud83e\uddea Testing Backend Connectivity...");try{console.log("\ud83c\udf10 Testing basic connectivity to http://localhost:8080...");const e=await fetch("http://localhost:8080",{method:"GET",mode:"cors"});console.log("\u2705 Backend ping response:",e.status,e.statusText),console.log("\ud83c\udfe5 Testing health endpoint...");const s=await fetch("http://localhost:8080/api/health",{method:"GET",mode:"cors"});console.log("\u2705 Health check response:",s.status,s.statusText),console.log("\ud83d\udd0d Testing registration endpoint without token...");const a=await fetch("http://localhost:8080/api/super-admin/registration-list",{method:"GET",mode:"cors"});console.log("\ud83d\udd0d No token response:",a.status,a.statusText);const t=localStorage.getItem("token");if(t){console.log("\ud83d\udd10 Testing registration endpoint with token...");const e=await fetch("http://localhost:8080/api/super-admin/registration-list",{method:"GET",mode:"cors",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});if(console.log("\ud83d\udd10 With token response:",e.status,e.statusText),e.ok){const s=await e.json();console.log("\ud83d\udcca Registration data:",s)}else{const s=await e.text();console.log("\u274c Error response:",s)}}else console.log("\u26a0\ufe0f No token found in localStorage")}catch(E){console.error("\u274c Backend connectivity test failed:",E),console.error("\u274c Error details:",E.message),E.message.includes("CORS")&&console.error("\ud83d\udeab CORS error detected - backend might not be configured for CORS"),E.message.includes("Failed to fetch")&&console.error("\ud83c\udf10 Network error - backend might not be running or accessible")}}),[]),qe=(0,t.useCallback)((async()=>{try{console.log("\ud83d\udd04 Fetching dashboard data from backend...");const[e,s,a]=await Promise.all([D((()=>i.Er.getFarmersWithKyc()),{cacheKey:"farmers"}),D((()=>i.s2.getAllEmployees()),{cacheKey:"employees"}),D((()=>i.Dv.getRegistrationList()),{cacheKey:"registrations"})]);e&&e.length>0&&console.log("\ud83d\udd0d Farmer data structure sample:",{firstFarmer:e[0],availableFields:Object.keys(e[0]),totalFarmers:e.length}),F(e||[]),I(s||[]),O(a||[]),console.log("\u2705 Dashboard data loaded successfully:",{farmers:(null===e||void 0===e?void 0:e.length)||0,employees:(null===s||void 0===s?void 0:s.length)||0,registrations:(null===a||void 0===a?void 0:a.length)||0})}catch(E){console.error("\u274c Error fetching dashboard data:",E),Me({type:"error",message:"Failed to load dashboard data. Please try again."})}}),[D]);(0,t.useEffect)((()=>{qe()}),[qe]),(0,t.useEffect)((()=>{const e=()=>{setTimeout((()=>{qe(),Me({type:"success",message:"Data refreshed after KYC update"})}),2e3)};return window.addEventListener("kycStatusUpdated",e),()=>window.removeEventListener("kycStatusUpdated",e)}),[qe]);const Ve=(0,t.useCallback)((e=>{M(e)}),[]),We=(0,t.useCallback)((e=>{L(e)}),[]),_e=(0,t.useMemo)((()=>{let e={farmers:[...T],employees:[...R],registrations:[...P]};if(K){const s=K.toLowerCase();e.farmers=e.farmers.filter((e=>{var a,t,l;return(null===(a=e.name)||void 0===a?void 0:a.toLowerCase().includes(s))||(null===(t=e.email)||void 0===t?void 0:t.toLowerCase().includes(s))||(null===(l=e.phoneNumber)||void 0===l?void 0:l.includes(K))})),e.employees=e.employees.filter((e=>{var a,t;return(null===(a=e.name)||void 0===a?void 0:a.toLowerCase().includes(s))||(null===(t=e.email)||void 0===t?void 0:t.toLowerCase().includes(s))})),e.registrations=e.registrations.filter((e=>{var a,t;return(null===(a=e.name)||void 0===a?void 0:a.toLowerCase().includes(s))||(null===(t=e.email)||void 0===t?void 0:t.toLowerCase().includes(s))}))}return Object.entries(G).forEach((s=>{let[a,t]=s;t&&(e.farmers=e.farmers.filter((e=>e[a]===t)),e.employees=e.employees.filter((e=>e[a]===t)),e.registrations=e.registrations.filter((e=>e[a]===t)))})),e}),[T,R,P,K,G]),Je=(0,t.useCallback)((async(e,s)=>{try{if(Array.isArray(e)&&"object"===typeof e[0]){var a;const t=e.map((e=>e.farmerId)),l=(null===(a=e[0])||void 0===a?void 0:a.employeeId)||s;await D((()=>i.Dv.bulkAssignFarmers(t,l)))}else await D((()=>i.Dv.bulkAssignFarmers(e,s)));Me({type:"success",message:"Farmers assigned successfully"}),qe()}catch(E){Me({type:"error",message:"Failed to assign farmers"})}}),[D,qe]),Be=(0,t.useCallback)((async()=>{try{const{item:e,type:s}=ye;"farmer"===s?(await D((()=>i.xs.deleteFarmer(e.id))),F((s=>s.filter((s=>s.id!==e.id))))):"employee"===s&&(await D((()=>i.s2.deleteEmployee(e.id))),I((s=>s.filter((s=>s.id!==e.id))))),Me({type:"success",message:`${s} deleted successfully`})}catch(E){Me({type:"error",message:"Failed to delete item"})}finally{Ne(!1),be(null)}}),[ye,D]),He=(0,t.useMemo)((()=>[{key:"name",label:"NAME",className:"col-name",render:(e,s)=>{const a=e||s.fullName||s.userName||s.firstName||s.lastName||s.farmerName;return a||(s.firstName||s.lastName?`${s.firstName||""} ${s.lastName||""}`.trim():"N/A")}},{key:"phoneNumber",label:"PHONE",className:"col-phone",render:(e,s)=>e||s.phone||s.mobile||s.contactNumber||s.mobileNumber||"N/A"},{key:"state",label:"STATE",className:"col-state",render:(e,s)=>e||s.stateName||s.state_name||s.farmerState||"N/A"},{key:"district",label:"DISTRICT",className:"col-district",render:(e,s)=>e||s.districtName||s.district_name||s.farmerDistrict||"N/A"},{key:"kycStatus",label:"KYC STATUS",type:"status",className:"col-kyc-status",render:(e,s)=>e||s.kyc_status||s.kycStatus||s.status||"N/A"},{key:"assignedEmployee",label:"ASSIGNED EMPLOYEE",className:"col-assigned-employee",render:(e,s)=>{if("string"===typeof e)return e;if(e&&"object"===typeof e)return e.name||e.employeeName||e.assignedEmployeeName||"Assigned";const a=s.assignedEmployeeName||s.employeeName||s.assignedTo||s.assignedEmployee;return a&&"object"===typeof a?a.name||a.employeeName||"Assigned":a||"Unassigned"}}]),[]),ze=(0,t.useMemo)((()=>[{key:"name",label:"Name",className:"col-name",render:(e,s)=>{const a=e||s.fullName||s.userName||s.firstName||s.lastName||s.employeeName;return a||(s.firstName||s.lastName?`${s.firstName||""} ${s.lastName||""}`.trim():"N/A")}},{key:"email",label:"Email",className:"col-email",render:(e,s)=>e||s.emailAddress||s.userEmail||s.employeeEmail||"N/A"},{key:"designation",label:"Designation",className:"col-role",render:(e,s)=>e||s.role||s.userRole||s.employeeRole||s.designation||"N/A"},{key:"assignedFarmers",label:"Assigned Farmers",className:"col-status",render:(e,s)=>"number"===typeof e?e.toString():Array.isArray(e)?e.length.toString():e||"0"},{key:"status",label:"Status",type:"status",className:"col-status",render:(e,s)=>e||s.employeeStatus||s.status||s.userStatus||"N/A"}]),[]),Qe=(0,t.useMemo)((()=>[{key:"name",label:"Name",className:"col-name",render:(e,s)=>e||s.fullName||s.userName||s.firstName||"N/A"},{key:"email",label:"Email",className:"col-email",render:(e,s)=>e||s.emailAddress||s.userEmail||"N/A"},{key:"role",label:"Role",className:"col-role",render:(e,s)=>e||s.userRole||s.type||s.userType||"N/A"},{key:"status",label:"Status",className:"col-status",type:"status",render:(e,s)=>e||s.registrationStatus||s.approvalStatus||s.kycStatus||"N/A"},{key:"registrationDate",label:"Registration Date",className:"col-date",render:(e,s)=>{const a=e||s.createdAt||s.created_on||s.createdDate;if(!a)return"N/A";try{const e=new Date(a);return isNaN(e.getTime())?String(a).slice(0,10):e.toISOString().slice(0,10)}catch{return String(a)}}}]),[]),Ze=(0,t.useMemo)((()=>[{key:"state",label:"STATE",type:"select",options:[{value:"all",label:"All States"},{value:"Telangana",label:"Telangana"},{value:"Andhrapradesh",label:"Andhrapradesh"}]},{key:"district",label:"DISTRICT",type:"select",options:[{value:"all",label:"All Districts"},{value:"Karimnagar",label:"Karimnagar"},{value:"rangareddy",label:"Rangareddy"},{value:"kadapa",label:"Kadapa"},{value:"Kadapa",label:"Kadapa"},{value:"kadpaa",label:"Kadpaa"}]},{key:"kycStatus",label:"KYC STATUS",type:"select",options:[{value:"all",label:"All KYC Status"},{value:"NOT_STARTED",label:"Not Started"},{value:"PENDING",label:"Pending"},{value:"APPROVED",label:"Approved"},{value:"REJECTED",label:"Rejected"}]},{key:"assignmentStatus",label:"ASSIGNMENT STATUS",type:"select",options:[{value:"all",label:"All Assignment Status"},{value:"ASSIGNED",label:"Assigned"},{value:"UNASSIGNED",label:"Unassigned"}]},{key:"assignedEmployee",label:"ASSIGNED EMPLOYEE",type:"select",options:[{value:"all",label:"All Employees"},{value:"dinakar lankipalli",label:"dinakar lankipalli"},{value:"harish reddy",label:"harish reddy"},{value:"karthik kumar",label:"karthik kumar"}]}]),[]);return!w||T.length||R.length||P.length?(0,m.jsxs)("div",{className:"dashboard",children:[(0,m.jsxs)("div",{className:"top-bar",children:[(0,m.jsxs)("div",{className:"top-bar-left",children:[(0,m.jsx)("div",{className:"logo-container",children:(0,m.jsxs)("div",{className:"logo-text",children:[(0,m.jsx)("h1",{className:"logo-title",children:" DATE "}),(0,m.jsx)("p",{className:"logo-subtitle",children:"Digital Agristack Transaction Enterprises"})]})}),(0,m.jsx)("div",{className:"date-display",children:(new Date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),(0,m.jsxs)("div",{className:"top-bar-right",children:[(0,m.jsx)(h.A,{}),(0,m.jsx)(f.A,{onShowChangePassword:()=>Ie(!0),onShowChangeUserId:()=>Oe(!0)})]})]}),(0,m.jsxs)("aside",{className:"dashboard-sidebar",children:[(0,m.jsx)("div",{className:"sidebar-header",children:(0,m.jsxs)("div",{className:"logo",children:[(0,m.jsx)("div",{className:"logo-text",children:"Welcome !!!"}),(0,m.jsx)("div",{className:"logo-subtitle",children:"Super Admin"})]})}),(0,m.jsxs)("nav",{className:"sidebar-nav",children:[(0,m.jsx)("button",{className:"nav-item "+("overview"===U?"active":""),onClick:()=>$("overview"),children:"\ud83d\udcca Overview"}),(0,m.jsx)("button",{className:"nav-item "+("farmers"===U?"active":""),onClick:()=>$("farmers"),children:"\ud83d\udc68\u200d\ud83c\udf3e Farmers"}),(0,m.jsx)("button",{className:"nav-item "+("employees"===U?"active":""),onClick:()=>$("employees"),children:"\ud83d\udc65 Employees"}),(0,m.jsx)("button",{className:"nav-item "+("registrations"===U?"active":""),onClick:()=>$("registrations"),children:"\ud83d\udcdd Registrations"}),(0,m.jsx)("button",{className:"nav-item",onClick:()=>e("/analytical-dashboard"),children:"\ud83d\udcc8 Dashboard"})]})]}),(0,m.jsx)("main",{className:"dashboard-main",children:(0,m.jsxs)("div",{className:"dashboard-content",children:["overview"===U&&!(Ee||xe||fe||oe||ee||le||B||Z||ue||pe)&&(0,m.jsx)("header",{className:"dashboard-header",children:(0,m.jsx)("div",{className:"header-center",children:(0,m.jsxs)("div",{className:"welcome-message",children:[(0,m.jsxs)("h2",{className:"greeting",children:[Ge(),", ",(null===s||void 0===s?void 0:s.name)||(null===s||void 0===s?void 0:s.email)||"Super Admin","! \ud83c\udf8b"]}),(0,m.jsx)("p",{className:"welcome-text",children:"Welcome to DATE Digital Agristack - Empowering your agricultural journey with data-driven insights."})]})})}),ee?(0,m.jsx)("div",{className:"dashboard-form-container",children:(0,m.jsx)(N.A,{isInDashboard:!0,farmer:ae,onClose:()=>{se(!1),te(null)},onSave:e=>{Me({type:"success",message:ae?"Farmer updated successfully":"Farmer added successfully"}),qe(),se(!1),te(null)}})}):le?(0,m.jsx)("div",{className:"dashboard-form-container",children:(0,m.jsx)(b.A,{isInDashboard:!0,employee:re,onClose:()=>{ne(!1),ie(null)},onSave:e=>{Me({type:"success",message:re?"Employee updated successfully":"Employee added successfully"}),qe(),ne(!1),ie(null)}})}):Ee?(0,m.jsxs)("div",{className:"dashboard-form-container",children:[console.log("\ud83d\udd0d Rendering farmer details section, selectedFarmerData:",Te),(0,m.jsx)(v.A,{farmerData:Te,onClose:()=>{De(!1),Fe(null)},isInDashboard:!0,onFarmerSelect:e=>Fe(e)})]}):xe?(0,m.jsx)("div",{className:"dashboard-form-container",children:(0,m.jsx)(v.A,{farmerData:Se||T,onClose:()=>{Se?Ae(null):je(!1)},isInDashboard:!0,onFarmerSelect:e=>Ae(e)})}):fe?(0,m.jsx)("div",{className:"dashboard-form-container",children:(0,m.jsx)(y.A,{employeeData:Ce||R,onClose:()=>{Ce?we(null):ke(!1)},onUpdate:e=>{Me({type:"success",message:"Employee updated successfully"}),qe()},isInDashboard:!0,onEmployeeSelect:e=>we(e)})}):Re?(0,m.jsx)("div",{className:"dashboard-form-container",children:(0,m.jsx)(k.A,{isOpen:!0,onClose:()=>Ie(!1),onSuccess:()=>{Me({type:"success",message:"Password changed successfully!"}),Ie(!1)},isInDashboard:!0})}):Pe?(0,m.jsx)("div",{className:"dashboard-form-container",children:(0,m.jsx)(S.A,{isOpen:!0,onClose:()=>Oe(!1),onSuccess:()=>{Me({type:"success",message:"User ID changed successfully!"}),Oe(!1)},isInDashboard:!0})}):(0,m.jsxs)(m.Fragment,{children:["overview"===U&&!(Ee||xe||fe||oe||ee||le||B||Z||ue||pe)&&(0,m.jsxs)("div",{className:"overview-section",children:[(0,m.jsxs)("div",{className:"overview-header",children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("h2",{className:"overview-title",children:"Super Admin Dashboard Overview"}),(0,m.jsx)("p",{className:"overview-description",children:"Welcome back! Here's what's happening with your agricultural data."})]}),(0,m.jsxs)("div",{className:"overview-actions",children:[(0,m.jsx)("button",{className:"action-btn refresh",onClick:qe,disabled:w,children:w?"Loading...":"Refresh"}),(0,m.jsx)("button",{className:"action-btn debug",onClick:Ue,style:{backgroundColor:"#6c757d",color:"white"},children:"Debug Auth"}),(0,m.jsx)("button",{className:"action-btn test",onClick:Ye,style:{backgroundColor:"#17a2b8",color:"white"},children:"Test Backend"}),(0,m.jsx)("button",{className:"action-btn danger",onClick:$e,style:{backgroundColor:"#dc3545",color:"white"},children:"Clear Tokens"}),(0,m.jsx)("button",{className:"action-btn this-month",children:"This Month"}),(0,m.jsx)("button",{className:"action-btn this-year",children:"This Year"})]})]}),(0,m.jsxs)("div",{className:"stats-grid",children:[(0,m.jsxs)("div",{className:"stats-card card-emerald",children:[(0,m.jsx)("h3",{children:"Total Farmers"}),(0,m.jsx)("div",{className:"stats-number",children:Le.totalFarmers}),(0,m.jsx)("div",{className:"stats-change",children:"+25% from last month"})]}),(0,m.jsxs)("div",{className:"stats-card card-gold",children:[(0,m.jsx)("h3",{children:"Total Employees"}),(0,m.jsx)("div",{className:"stats-number",children:Le.totalEmployees}),(0,m.jsx)("div",{className:"stats-change",children:"+5% from last month"})]}),(0,m.jsxs)("div",{className:"stats-card card-orange",children:[(0,m.jsx)("h3",{children:"Pending Registrations"}),(0,m.jsx)("div",{className:"stats-number",children:Le.pendingRegistrations}),(0,m.jsx)("div",{className:"stats-change",children:"No change"})]}),(0,m.jsxs)("div",{className:"stats-card card-red",children:[(0,m.jsx)("h3",{children:"KYC Pending"}),(0,m.jsx)("div",{className:"stats-number",children:Le.farmersPendingKYC}),(0,m.jsx)("div",{className:"stats-change red",children:"All Required Cleared"})]})]}),(0,m.jsxs)("div",{className:"dashboard-sections",children:[(0,m.jsxs)("div",{className:"section recent-activities",children:[(0,m.jsxs)("div",{className:"section-header",children:[(0,m.jsx)("h3",{children:"Recent Activities"}),(0,m.jsx)("button",{className:"view-all-btn",children:"View All"})]}),(0,m.jsxs)("div",{className:"activities-list",children:[(0,m.jsxs)("div",{className:"activity-item",children:[(0,m.jsxs)("div",{className:"activity-content",children:[(0,m.jsx)("div",{className:"activity-title",children:"New farmer registration approved"}),(0,m.jsx)("div",{className:"activity-time",children:"2 hours ago"})]}),(0,m.jsx)("span",{className:"activity-status approved",children:"APPROVED"})]}),(0,m.jsxs)("div",{className:"activity-item",children:[(0,m.jsxs)("div",{className:"activity-content",children:[(0,m.jsx)("div",{className:"activity-title",children:"KYC verification completed"}),(0,m.jsx)("div",{className:"activity-time",children:"4 hours ago"})]}),(0,m.jsx)("span",{className:"activity-status completed",children:"COMPLETED"})]}),(0,m.jsxs)("div",{className:"activity-item",children:[(0,m.jsxs)("div",{className:"activity-content",children:[(0,m.jsx)("div",{className:"activity-title",children:"Employee assigned to new farmers"}),(0,m.jsx)("div",{className:"activity-time",children:"6 hours ago"})]}),(0,m.jsx)("span",{className:"activity-status pending",children:"PENDING"})]})]})]}),(0,m.jsxs)("div",{className:"section quick-actions",children:[(0,m.jsx)("div",{className:"section-header",children:(0,m.jsx)("h3",{children:"Quick Actions"})}),(0,m.jsxs)("div",{className:"quick-actions-grid",children:[(0,m.jsx)("button",{className:"quick-action-btn qa-add",onClick:()=>se(!0),children:"Add Farmer"}),(0,m.jsx)("button",{className:"quick-action-btn qa-view-farmer",onClick:()=>je(!0),children:"View Farmer"}),(0,m.jsx)("button",{className:"quick-action-btn qa-add-employee",onClick:()=>ne(!0),children:"Add Employee"}),(0,m.jsx)("button",{className:"quick-action-btn qa-view-employee",onClick:()=>ke(!0),children:"View Employee"})]})]})]})]}),"overview"!==U&&(0,m.jsx)(u,{onSearch:Ve,onFilter:We,filters:Ze,placeholder:"Search farmers, employees, or registrations..."}),"farmers"===U&&(0,m.jsxs)("div",{className:"tab-content",children:[(0,m.jsxs)("div",{className:"tab-header",children:[(0,m.jsxs)("div",{className:"header-info",children:[(0,m.jsx)("h2",{className:"section-title",children:"Farmer Management"}),(0,m.jsx)("p",{className:"section-description",children:"Manage farmer registrations and assignments."})]}),(0,m.jsxs)("div",{className:"header-actions",children:[(0,m.jsx)("button",{className:"action-btn primary",onClick:()=>se(!0),children:"\u2795 Add Farmer"}),(0,m.jsx)("button",{className:"action-btn secondary",onClick:()=>X(!0),children:"\ud83d\udccb Assign Farmers"}),(0,m.jsx)("button",{className:"action-btn secondary",onClick:qe,children:"\ud83d\udd04 Refresh Data"})]})]}),(0,m.jsx)(o.A,{data:_e.farmers,columns:He,onEdit:e=>{te(e),se(!0)},onDelete:e=>{be({item:e,type:"farmer"}),Ne(!0)},onView:e=>{console.log("\ud83d\udd0d View button clicked for farmer:",e),Fe(e),De(!0)},onKycUpdate:e=>{ve(e),he(!0)},showDelete:!0,loading:w,emptyMessage:"No farmers found"})]}),"employees"===U&&(0,m.jsxs)("div",{className:"tab-content",children:[(0,m.jsxs)("div",{className:"tab-header",children:[(0,m.jsx)("h2",{children:"Employees Management"}),(0,m.jsx)("button",{className:"action-btn primary",onClick:()=>ne(!0),children:"\u2795 Add Employee"})]}),(0,m.jsx)(o.A,{data:_e.employees,columns:ze,onEdit:e=>{ie(e),ne(!0)},onDelete:e=>{be({item:e,type:"employee"}),Ne(!0)},onView:e=>{we(e),ke(!0)},showDelete:!0,loading:w,emptyMessage:"No employees found"})]}),"registrations"===U&&(0,m.jsxs)("div",{className:"tab-content",children:[(0,m.jsx)("div",{className:"tab-header",children:(0,m.jsx)("h2",{children:"Registration Management"})}),(0,m.jsx)(o.A,{data:_e.registrations,columns:Qe,onView:e=>{Q(e),H(!0)},loading:w,emptyMessage:"No registrations found"})]})]})]})}),Z&&(0,m.jsx)(p.A,{farmers:T,employees:R,onClose:()=>X(!1),onAssign:async e=>{await Je(e),X(!1)}}),ue&&ge&&(0,m.jsx)(x.A,{farmer:ge,onClose:()=>{he(!1),ve(null)},onSave:()=>{Me({type:"success",message:"KYC documents uploaded successfully"}),qe(),he(!1),ve(null)}}),oe&&de&&(0,m.jsx)(y.A,{employee:de,onClose:()=>{ce(!1),me(null)},onEdit:e=>{ie(e),ne(!0),ce(!1),me(null)}}),B&&z&&(0,m.jsx)(g.A,{registration:z,onClose:()=>{H(!1),Q(null)}}),pe&&ye&&(0,m.jsx)(j,{item:ye.item,type:ye.type,onConfirm:Be,onClose:()=>{Ne(!1),be(null)}}),Ke&&(0,m.jsx)(d.A,{type:Ke.type,message:Ke.message,onClose:()=>Me(null)})]}):(0,m.jsx)(c.A,{fullScreen:!0,text:"Loading dashboard..."})}},3498:(e,s,a)=>{a.d(s,{A:()=>n});var t=a(5043),l=a(579);const n=e=>{let{message:s,type:a="info",duration:n=5e3,onClose:r,position:i="top-right"}=e;const[o,c]=(0,t.useState)(!0),[d,m]=(0,t.useState)(!1);(0,t.useEffect)((()=>{const e=setTimeout((()=>{u()}),n);return()=>clearTimeout(e)}),[n]);const u=()=>{m(!0),setTimeout((()=>{c(!1),null===r||void 0===r||r()}),300)};return o?(0,l.jsxs)("div",{className:`notification-toast ${a} ${i} ${d?"exiting":""}`,children:[(0,l.jsxs)("div",{className:"toast-content",children:[(0,l.jsx)("div",{className:"toast-icon",children:(()=>{switch(a){case"success":return"\u2705";case"error":return"\u274c";case"warning":return"\u26a0\ufe0f";default:return"\u2139\ufe0f"}})()}),(0,l.jsx)("div",{className:"toast-message",children:s}),(0,l.jsx)("button",{className:"toast-close",onClick:u,children:"\xd7"})]}),(0,l.jsx)("div",{className:"toast-progress",children:(0,l.jsx)("div",{className:"progress-bar",style:{animationDuration:`${n}ms`,animationDelay:"300ms"}})})]}):null}}}]);
//# sourceMappingURL=582.a22b47c9.chunk.js.map