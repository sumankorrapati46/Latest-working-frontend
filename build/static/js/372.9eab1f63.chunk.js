"use strict";(self.webpackChunkagristack_farmer_management=self.webpackChunkagristack_farmer_management||[]).push([[372],{476:(e,a,s)=>{s.d(a,{Ay:()=>m,Dv:()=>i,Er:()=>l,JL:()=>d,R2:()=>r,kM:()=>c,s2:()=>o,xs:()=>n});const t=s(6213).A.create({baseURL:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_URL||"http://localhost:8080/api",timeout:1e4,headers:{"Content-Type":"application/json"}});t.interceptors.request.use((e=>{const a=localStorage.getItem("token");return a&&(e.headers.Authorization=`Bearer ${a}`),e}),(e=>Promise.reject(e))),t.interceptors.response.use((e=>e),(e=>{var a;return 401===(null===(a=e.response)||void 0===a?void 0:a.status)&&(localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="/login"),Promise.reject(e)}));const r={login:async e=>(await t.post("/auth/login",e)).data,getProfile:async()=>(await t.get("/auth/profile")).data,register:async e=>(await t.post("/auth/register",e)).data,sendOTP:async e=>(await t.post("/auth/send-otp",{emailOrPhone:e})).data,verifyOTP:async e=>(await t.post("/auth/verify-otp",{emailOrPhone:e.email,otp:e.otp})).data,resendOTP:async e=>(await t.post("/auth/resend-otp",{emailOrPhone:e})).data,forgotPassword:async e=>(await t.post("/auth/forgot-password",{emailOrPhone:e})).data,forgotUserId:async e=>(await t.post("/auth/forgot-user-id",{emailOrPhone:e})).data,resetPassword:async e=>(await t.post("/auth/reset-password",e)).data,changePassword:async e=>(await t.post("/auth/change-password",e)).data,changeUserId:async e=>(await t.post("/auth/change-user-id",e)).data,getCountries:async()=>(await t.get("/auth/countries")).data,getStates:async e=>(await t.post("/auth/states",{countryId:e})).data},i={getAllUsers:async()=>(await t.get("/super-admin/registration-list")).data,getRegistrationList:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await t.get("/super-admin/registration-list",{params:e})).data},getRegistrationListByStatus:async e=>(await t.get("/super-admin/registration-list/filter",{params:{status:e}})).data,searchRegistrations:async e=>(await t.get("/super-admin/registration-list/search",{params:{query:e}})).data,getPendingRegistrations:async()=>(await t.get("/super-admin/pending-registrations")).data,getApprovedUsers:async()=>(await t.get("/super-admin/approved-users")).data,getUsersByRole:async e=>(await t.get(`/super-admin/users/by-role/${e}`)).data,getPendingUsersByRole:async e=>(await t.get(`/super-admin/pending-users/by-role/${e}`)).data,approveUser:async(e,a)=>(await t.put(`/auth/users/${e}/approve`,{role:a})).data,rejectUser:async(e,a)=>(await t.put(`/auth/users/${e}/status`,{status:"REJECTED"})).data,deleteUser:async e=>(await t.delete(`/super-admin/users/${e}`)).data,updateUser:async(e,a)=>(await t.put(`/super-admin/users/${e}`,a)).data,updateUserStatus:async(e,a)=>(await t.put(`/auth/users/${e}/status`,{status:a})).data,getDashboardStats:async()=>(await t.get("/super-admin/dashboard/stats")).data,bulkAssignFarmers:async(e,a)=>(await t.post("/super-admin/bulk-assign-farmers",{farmerIds:e,employeeId:a})).data,assignFarmer:async(e,a)=>(await t.post("/super-admin/assign-farmer",null,{params:{farmerId:e,employeeId:a}})).data},n={getAllFarmers:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await t.get("/super-admin/farmers",{params:e})).data},getFarmerById:async e=>(await t.get(`/super-admin/farmers/${e}`)).data,createFarmer:async e=>(await t.post("/super-admin/farmers",e)).data,updateFarmer:async(e,a)=>(await t.put(`/super-admin/farmers/${e}`,a)).data,deleteFarmer:async e=>(await t.delete(`/super-admin/farmers/${e}`)).data,assignFarmer:async(e,a)=>(await t.post(`/super-admin/farmers/${e}/assign`,{employeeId:a})).data,getFarmerStats:async()=>(await t.get("/super-admin/farmers/stats")).data},l={getAllFarmers:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await t.get("/admin/farmers",{params:e})).data},getAllEmployees:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await t.get("/admin/employees",{params:e})).data},getFarmersWithKyc:async()=>(await t.get("/admin/farmers-with-kyc")).data,getEmployeesWithStats:async()=>(await t.get("/admin/employees-with-stats")).data,getFarmersByEmployee:async e=>(await t.get(`/admin/employees/${e}/assigned-farmers`)).data,getTodoList:async()=>(await t.get("/admin/todo-list")).data,getEnhancedTodoList:async()=>(await t.get("/admin/enhanced-todo-list")).data,getDashboardStats:async()=>(await t.get("/admin/dashboard-stats")).data,filterFarmers:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await t.get("/admin/farmers/filter",{params:e})).data},getLocations:async()=>(await t.get("/admin/locations")).data,bulkAssignFarmers:async(e,a)=>(await t.post("/admin/bulk-assign-farmers",{farmerIds:e,employeeId:a})).data,assignFarmer:async(e,a)=>(await t.post("/admin/assign-farmer",null,{params:{farmerId:e,employeeId:a}})).data,getAssignmentHistory:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await t.get("/admin/assignment-history",{params:e})).data},getFarmersByAssignmentStatus:async e=>(await t.get("/admin/farmers/by-assignment-status",{params:{assignmentStatus:e}})).data,getAllRegistrations:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await t.get("/admin/registration-list",{params:e})).data},getRegistrationListByStatus:async e=>(await t.get("/admin/registration-list/filter",{params:{status:e}})).data,approveRegistration:async(e,a)=>(await t.post(`/admin/registrations/${e}/approve`,a)).data,rejectRegistration:async(e,a)=>(await t.post(`/admin/registrations/${e}/reject`,a)).data},o={getAllEmployees:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await t.get("/super-admin/employees",{params:e})).data},getEmployeeById:async e=>(await t.get(`/super-admin/employees/${e}`)).data,createEmployee:async e=>(await t.post("/super-admin/employees",e)).data,updateEmployee:async(e,a)=>(await t.put(`/super-admin/employees/${e}`,a)).data,deleteEmployee:async e=>(await t.delete(`/super-admin/employees/${e}`)).data,getAssignedFarmers:async e=>(await t.get(`/super-admin/employees/${e}/assigned-farmers`)).data,getEmployeeStats:async()=>(await t.get("/super-admin/employees/stats")).data},d={getAssignedFarmers:async e=>{try{console.log("\ud83d\udd04 Fetching assigned farmers from dashboard endpoint");const e=await t.get("/employees/dashboard/assigned-farmers");return console.log("\u2705 Success with dashboard endpoint"),e.data}catch(a){throw console.error("\u274c Failed to fetch assigned farmers:",a),a}},getProfile:async()=>(await t.get("/employees/profile")).data,updateProfile:async e=>(await t.put("/employees/profile",e)).data,getStats:async()=>(await t.get("/employees/stats")).data},c={uploadDocuments:async(e,a)=>{const s=new FormData;Object.keys(a).forEach((e=>{a[e]&&s.append(e,a[e])}));return(await t.post(`/employees/kyc/${e}/upload`,s,{headers:{"Content-Type":"multipart/form-data"}})).data},approveKYC:async(e,a)=>(await t.put(`/employees/kyc/approve/${e}`)).data,rejectKYC:async(e,a)=>(await t.put(`/employees/kyc/reject/${e}`,{reason:a.reason||"KYC rejected"})).data,referBackKYC:async(e,a)=>(await t.put(`/employees/kyc/refer-back/${e}`,{reason:a.reason||"KYC referred back"})).data,getKYCStatus:async e=>(await t.get(`/employees/kyc/${e}/status`)).data,getKYCDocuments:async e=>(await t.get(`/employees/kyc/${e}/documents`)).data},m=t},4003:()=>{},4513:(e,a,s)=>{e.exports=s.p+"static/media/rightlogo.1742b4514aa334820279.png"},7372:(e,a,s)=>{s.r(a),s.d(a,{default:()=>p});var t=s(5043),r=s(4858),i=s(8403),n=s(899),l=s(476),o=s(3216),d=s(5475),c=s(4513),m=(s(4003),s(579));const g=n.Ik().shape({name:n.Yj().required("Name is required"),dateOfBirth:n.Yj().required("Date of Birth is required").test("age-range","Age must be between 18 and 90 years",(function(e){if(!e)return!1;const a=new Date(e),s=new Date,t=new Date(s-a),r=Math.abs(t.getUTCFullYear()-1970);return r>=18&&r<=90})),gender:n.Yj().required("Gender is required"),email:n.Yj().required("Email is required").matches(/^[^\s@]+@[^\s@]+\.[^\s@]+$/,"Email must include @ and be valid"),phoneNumber:n.Yj().matches(/^\d{10}$/,"Enter a valid 10-digit phone number").required("Phone number is required"),role:n.Yj().required("Role is required"),password:n.Yj().required("Password is required").min(8,"Password must be at least 8 characters").matches(/[A-Z]/,"Password must contain at least one uppercase letter").matches(/[a-z]/,"Password must contain at least one lowercase letter").matches(/[0-9]/,"Password must contain at least one number").matches(/[@$!%*?&#^()_+\-=[\]{};':"\\|,.<>/?]/,"Password must contain at least one special character")}),p=()=>{var e;const a=(null===(e=(0,o.zy)().state)||void 0===e?void 0:e.role)||"",{register:s,handleSubmit:n,reset:p,formState:{errors:u}}=(0,r.mN)({resolver:(0,i.t)(g),defaultValues:{role:a}}),[h,y]=(0,t.useState)(""),[f,j]=(0,t.useState)(!1),[w,x]=(0,t.useState)(""),[v,N]=(0,t.useState)(!1),[b,P]=(0,t.useState)(0);(0,t.useEffect)((()=>{if(!b)return;const e=setTimeout((()=>P((e=>e-1))),1e3);return()=>clearTimeout(e)}),[b]);const E=async()=>{if(h.match(/^[^\s@]+@[^\s@]+\.[^\s@]+$/))try{await l.R2.sendOTP(h),j(!0),P(30),alert("OTP sent")}catch(s){var e,a;alert((null===(e=s.response)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.message)||"Failed to send OTP"),console.error(s)}else alert("Enter a valid email first")};return(0,m.jsx)("div",{className:"login-page-container",children:(0,m.jsxs)("div",{className:"login-page-main-content",children:[(0,m.jsxs)("div",{className:"login-page-info-panel",children:[(0,m.jsxs)("div",{className:"login-page-brand-header",children:[(0,m.jsxs)("div",{className:"login-page-brand-logo",children:[(0,m.jsx)("span",{className:"login-page-brand-text",children:"Date"}),(0,m.jsx)("span",{className:"login-page-brand-accent",children:"Agri"}),(0,m.jsx)("span",{className:"login-page-brand-icon",children:"\ud83c\udf3f"}),(0,m.jsx)("span",{className:"login-page-brand-text",children:"Stack"})]}),(0,m.jsx)("h1",{className:"login-page-main-title",children:"India Farmer Registry"})]}),(0,m.jsxs)("div",{className:"login-page-platform-info",children:[(0,m.jsx)("h2",{children:"Join Our Platform"}),(0,m.jsx)("p",{className:"login-page-tagline",children:"Become part of India's agricultural revolution"})]}),(0,m.jsxs)("div",{className:"login-page-features-grid",children:[(0,m.jsxs)("div",{className:"login-page-feature-card",children:[(0,m.jsx)("div",{className:"login-page-feature-icon",children:"\ud83d\ude80"}),(0,m.jsxs)("div",{className:"login-page-feature-content",children:[(0,m.jsx)("h3",{children:"Quick Registration"}),(0,m.jsx)("p",{children:"Get started in minutes with our streamlined signup process"})]})]}),(0,m.jsxs)("div",{className:"login-page-feature-card",children:[(0,m.jsx)("div",{className:"login-page-feature-icon",children:"\ud83d\udd12"}),(0,m.jsxs)("div",{className:"login-page-feature-content",children:[(0,m.jsx)("h3",{children:"Secure Verification"}),(0,m.jsx)("p",{children:"Email verification ensures your account security"})]})]}),(0,m.jsxs)("div",{className:"login-page-feature-card",children:[(0,m.jsx)("div",{className:"login-page-feature-icon",children:"\ud83d\udccb"}),(0,m.jsxs)("div",{className:"login-page-feature-content",children:[(0,m.jsx)("h3",{children:"Easy Profile Setup"}),(0,m.jsx)("p",{children:"Simple form to create your personalized account"})]})]}),(0,m.jsxs)("div",{className:"login-page-feature-card",children:[(0,m.jsx)("div",{className:"login-page-feature-icon",children:"\u26a1"}),(0,m.jsxs)("div",{className:"login-page-feature-content",children:[(0,m.jsx)("h3",{children:"Instant Access"}),(0,m.jsx)("p",{children:"Start using platform features immediately after approval"})]})]}),(0,m.jsxs)("div",{className:"login-page-feature-card",children:[(0,m.jsx)("div",{className:"login-page-feature-icon",children:"\ud83c\udfaf"}),(0,m.jsxs)("div",{className:"login-page-feature-content",children:[(0,m.jsx)("h3",{children:"Tailored Experience"}),(0,m.jsx)("p",{children:"Customized dashboard based on your role and needs"})]})]})]})]}),(0,m.jsx)("div",{className:"login-page-form-section",children:(0,m.jsxs)("div",{className:"login-page-card",children:[(0,m.jsxs)("div",{className:"login-page-date-logo-section",children:[(0,m.jsx)("img",{src:c,alt:"DATE Logo",className:"login-page-date-logo"}),(0,m.jsxs)("div",{className:"login-page-date-text",children:[(0,m.jsx)("h3",{children:"Digital Agristack Transaction Enterprises"}),(0,m.jsx)("p",{children:"Empowering Agricultural Excellence"})]})]}),(0,m.jsxs)("div",{className:"login-page-login-type-section",children:[(0,m.jsx)("h3",{children:"Registration Form"}),(0,m.jsx)("p",{children:"Enter your details to get started"})]}),(0,m.jsxs)("form",{onSubmit:n((async e=>{if(v)try{console.log("Submitting registration data:",e);const a=await l.R2.register(e);console.log("Registration successful:",a),alert("Registration successful! Please wait for admin approval. You will receive an email with login credentials once approved."),p(),N(!1),j(!1),y(""),x("")}catch(a){console.error("Registration error:",a),alert("Registration failed. Please try again.")}else alert("Please verify your email before submitting.")})),className:"login-page-form",children:[(0,m.jsx)("input",{type:"hidden",...s("role"),value:a}),a&&(0,m.jsxs)("div",{className:"login-page-form-field",children:[(0,m.jsx)("label",{children:"Role"}),(0,m.jsx)("input",{type:"text",value:a,readOnly:!0,className:"login-page-form-input role-field"})]}),(0,m.jsxs)("div",{className:"form-fields-grid",children:[(0,m.jsxs)("div",{className:"form-row",children:[(0,m.jsxs)("div",{className:"login-page-form-field",children:[(0,m.jsxs)("label",{children:["Name ",(0,m.jsx)("span",{className:"required",children:"*"})]}),(0,m.jsx)("input",{type:"text",...s("name"),className:"login-page-form-input "+(u.name?"error":""),placeholder:"Enter your first name"}),u.name&&(0,m.jsx)("span",{className:"error-message",children:u.name.message})]}),(0,m.jsxs)("div",{className:"login-page-form-field",children:[(0,m.jsxs)("label",{children:["Gender ",(0,m.jsx)("span",{className:"required",children:"*"})]}),(0,m.jsxs)("select",{...s("gender"),className:"login-page-form-input "+(u.gender?"error":""),children:[(0,m.jsx)("option",{value:"",children:"Select gender"}),(0,m.jsx)("option",{value:"Male",children:"Male"}),(0,m.jsx)("option",{value:"Female",children:"Female"}),(0,m.jsx)("option",{value:"Other",children:"Other"})]}),u.gender&&(0,m.jsx)("span",{className:"error-message",children:u.gender.message})]})]}),(0,m.jsxs)("div",{className:"form-row",children:[(0,m.jsxs)("div",{className:"login-page-form-field",children:[(0,m.jsxs)("label",{children:["Date of Birth ",(0,m.jsx)("span",{className:"required",children:"*"})]}),(0,m.jsx)("input",{type:"date",...s("dateOfBirth"),className:"login-page-form-input "+(u.dateOfBirth?"error":"")}),u.dateOfBirth&&(0,m.jsx)("span",{className:"error-message",children:u.dateOfBirth.message})]}),(0,m.jsxs)("div",{className:"login-page-form-field",children:[(0,m.jsxs)("label",{children:["Phone Number ",(0,m.jsx)("span",{className:"required",children:"*"})]}),(0,m.jsx)("input",{type:"text",...s("phoneNumber"),className:"login-page-form-input "+(u.phoneNumber?"error":""),placeholder:"Enter 10-digit number"}),u.phoneNumber&&(0,m.jsx)("span",{className:"error-message",children:u.phoneNumber.message})]})]}),(0,m.jsxs)("div",{className:"form-row",children:[(0,m.jsxs)("div",{className:"login-page-form-field",children:[(0,m.jsxs)("label",{children:["Email Address ",(0,m.jsx)("span",{className:"required",children:"*"})]}),(0,m.jsx)("input",{type:"email",...s("email"),value:h,onChange:e=>{y(e.target.value),j(!1),N(!1)},className:"login-page-form-input "+(u.email?"error":""),placeholder:"Enter your email"}),u.email&&(0,m.jsx)("span",{className:"error-message",children:u.email.message})]}),(0,m.jsxs)("div",{className:"login-page-form-field",children:[(0,m.jsxs)("label",{children:["Password ",(0,m.jsx)("span",{className:"required",children:"*"})]}),(0,m.jsx)("input",{type:"password",...s("password"),className:"login-page-form-input "+(u.password?"error":""),placeholder:"Enter a strong password",autoComplete:"new-password"}),u.password&&(0,m.jsx)("span",{className:"error-message",children:u.password.message})]})]})]}),(0,m.jsxs)("div",{className:"email-verification",children:[!f&&!v&&(0,m.jsx)("button",{type:"button",onClick:E,className:"login-page-login-btn",children:"Send OTP"}),f&&!v&&(0,m.jsxs)("div",{className:"otp-section",children:[(0,m.jsx)("input",{type:"text",placeholder:"Enter OTP",value:w,onChange:e=>x(e.target.value),className:"login-page-form-input"}),(0,m.jsxs)("div",{className:"otp-buttons",children:[(0,m.jsx)("button",{type:"button",onClick:E,className:"login-page-create-account-btn",disabled:b>0,children:b>0?`Resend (${b}s)`:"Resend"}),(0,m.jsx)("button",{type:"button",onClick:async()=>{try{await l.R2.verifyOTP({email:h,otp:w}),alert("Email verified successfully!"),N(!0)}catch(e){alert("OTP verification error."),console.error(e)}},className:"login-page-login-btn",children:"Verify"})]})]}),v&&(0,m.jsxs)("div",{className:"verification-success",children:[(0,m.jsx)("span",{className:"success-icon",children:"\u2713"}),"Email Verified"]})]}),(0,m.jsx)("div",{className:"login-page-actions-row",children:(0,m.jsx)("button",{type:"submit",className:"login-page-login-btn",children:"Register Now"})}),(0,m.jsx)("div",{className:"login-link",children:(0,m.jsxs)("p",{children:["Already have an account? ",(0,m.jsx)(d.N_,{to:"/login",children:"Sign In"})]})})]})]})})]})})}}}]);
//# sourceMappingURL=372.9eab1f63.chunk.js.map