"use strict";(self.webpackChunkagristack_farmer_management=self.webpackChunkagristack_farmer_management||[]).push([[164],{164:(e,a,s)=>{s.r(a),s.d(a,{default:()=>u});var t=s(5043),r=s(4858),i=s(8403),n=s(899),l=s(476),d=s(3216),o=s(5475),c=s(579);const m=n.Ik().shape({name:n.Yj().required("Name is required"),dateOfBirth:n.Yj().required("Date of Birth is required").test("age-range","Age must be between 18 and 90 years",(function(e){if(!e)return!1;const a=new Date(e),s=new Date,t=new Date(s-a),r=Math.abs(t.getUTCFullYear()-1970);return r>=18&&r<=90})),gender:n.Yj().required("Gender is required"),email:n.Yj().required("Email is required").matches(/^[^\s@]+@[^\s@]+\.[^\s@]+$/,"Email must include @ and be valid"),phoneNumber:n.Yj().matches(/^\d{10}$/,"Enter a valid 10-digit phone number").required("Phone number is required"),role:n.Yj().required("Role is required"),password:n.Yj().required("Password is required").min(8,"Password must be at least 8 characters").matches(/[A-Z]/,"Password must contain at least one uppercase letter").matches(/[a-z]/,"Password must contain at least one lowercase letter").matches(/[0-9]/,"Password must contain at least one number").matches(/[@$!%*?&#^()_+\-=[\]{};':"\\|,.<>/?]/,"Password must contain at least one special character")}),u=()=>{var e;const a=(null===(e=(0,d.zy)().state)||void 0===e?void 0:e.role)||"",{register:s,handleSubmit:n,reset:u,formState:{errors:p}}=(0,r.mN)({resolver:(0,i.t)(m),defaultValues:{role:a}}),[g,h]=(0,t.useState)(""),[y,f]=(0,t.useState)(!1),[x,j]=(0,t.useState)(""),[w,v]=(0,t.useState)(!1),[N,b]=(0,t.useState)(0);(0,t.useEffect)((()=>{if(!N)return;const e=setTimeout((()=>b((e=>e-1))),1e3);return()=>clearTimeout(e)}),[N]);const k=async()=>{if(g.match(/^[^\s@]+@[^\s@]+\.[^\s@]+$/))try{await l.R2.sendOTP(g),f(!0),b(30),alert("OTP sent")}catch(s){var e,a;alert((null===(e=s.response)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.message)||"Failed to send OTP"),console.error(s)}else alert("Enter a valid email first")};return(0,c.jsxs)("div",{className:"registration-container",children:[(0,c.jsxs)("div",{className:"info-panel",children:[(0,c.jsxs)("div",{className:"brand-header",children:[(0,c.jsxs)("div",{className:"brand-logo",children:[(0,c.jsx)("span",{className:"brand-text",children:"Date"}),(0,c.jsx)("span",{className:"brand-accent",children:"Agri"}),(0,c.jsx)("span",{className:"brand-icon",children:"\ud83c\udf3f"}),(0,c.jsx)("span",{className:"brand-text",children:"Stack"})]}),(0,c.jsx)("h1",{className:"main-title",children:"India Farmer Registry"})]}),(0,c.jsxs)("div",{className:"platform-info",children:[(0,c.jsx)("h2",{children:"Digital Agristack Transaction Enterprises"}),(0,c.jsx)("p",{className:"tagline",children:"Empowering Agricultural Excellence"})]}),(0,c.jsxs)("div",{className:"features-grid",children:[(0,c.jsxs)("div",{className:"feature-card",children:[(0,c.jsx)("div",{className:"feature-icon",children:"\ud83c\udf3e"}),(0,c.jsxs)("div",{className:"feature-content",children:[(0,c.jsx)("h3",{children:"Revolutionizing Indian Agriculture"}),(0,c.jsx)("p",{children:"Connecting 140+ million farmers with cutting-edge digital solutions"})]})]}),(0,c.jsxs)("div",{className:"feature-card",children:[(0,c.jsx)("div",{className:"feature-icon",children:"\ud83d\udcf1"}),(0,c.jsxs)("div",{className:"feature-content",children:[(0,c.jsx)("h3",{children:"Smart Farming Technology"}),(0,c.jsx)("p",{children:"AI-powered crop monitoring and precision agriculture tools"})]})]}),(0,c.jsxs)("div",{className:"feature-card",children:[(0,c.jsx)("div",{className:"feature-icon",children:"\ud83d\udcb0"}),(0,c.jsxs)("div",{className:"feature-content",children:[(0,c.jsx)("h3",{children:"Financial Inclusion"}),(0,c.jsx)("p",{children:"Direct benefit transfers and digital payment solutions"})]})]}),(0,c.jsxs)("div",{className:"feature-card",children:[(0,c.jsx)("div",{className:"feature-icon",children:"\ud83c\udf31"}),(0,c.jsxs)("div",{className:"feature-content",children:[(0,c.jsx)("h3",{children:"Sustainable Practices"}),(0,c.jsx)("p",{children:"Promoting eco-friendly farming and climate-smart agriculture"})]})]}),(0,c.jsxs)("div",{className:"feature-card",children:[(0,c.jsx)("div",{className:"feature-icon",children:"\ud83c\udfc6"}),(0,c.jsxs)("div",{className:"feature-content",children:[(0,c.jsx)("h3",{children:"National Recognition"}),(0,c.jsx)("p",{children:"Government of India's flagship agricultural digitization initiative"})]})]})]})]}),(0,c.jsx)("div",{className:"form-panel",children:(0,c.jsxs)("div",{className:"form-card",children:[(0,c.jsxs)("div",{className:"form-header",children:[(0,c.jsxs)("div",{className:"date-logo-section",children:[(0,c.jsx)("div",{className:"date-logo",children:(0,c.jsxs)("svg",{width:"64",height:"64",viewBox:"0 0 64 64",xmlns:"http://www.w3.org/2000/svg",children:[(0,c.jsxs)("g",{stroke:"#15803d",strokeWidth:"2",fill:"none",strokeLinecap:"round",children:[(0,c.jsx)("path",{d:"M12 24 C12 32 12 40 12 48"}),(0,c.jsx)("path",{d:"M32 24 C32 32 32 40 32 48"}),(0,c.jsx)("path",{d:"M52 24 C52 32 52 40 52 48"})]}),(0,c.jsxs)("g",{children:[(0,c.jsxs)("g",{transform:"translate(12 16)",children:[(0,c.jsx)("ellipse",{cx:"0",cy:"0",rx:"4",ry:"8",fill:"#FACC15",stroke:"#D97706",strokeWidth:"2"}),(0,c.jsx)("circle",{cx:"0",cy:"0",r:"6",fill:"#8B5E3C",stroke:"#A16207",strokeWidth:"2"})]}),(0,c.jsxs)("g",{transform:"translate(32 14)",children:[(0,c.jsx)("ellipse",{cx:"0",cy:"0",rx:"4",ry:"8",fill:"#FACC15",stroke:"#D97706",strokeWidth:"2"}),(0,c.jsx)("circle",{cx:"0",cy:"0",r:"6",fill:"#8B5E3C",stroke:"#A16207",strokeWidth:"2"})]}),(0,c.jsxs)("g",{transform:"translate(52 16)",children:[(0,c.jsx)("ellipse",{cx:"0",cy:"0",rx:"4",ry:"8",fill:"#FACC15",stroke:"#D97706",strokeWidth:"2"}),(0,c.jsx)("circle",{cx:"0",cy:"0",r:"6",fill:"#8B5E3C",stroke:"#A16207",strokeWidth:"2"})]})]})]})}),(0,c.jsxs)("div",{className:"date-text",children:[(0,c.jsx)("h3",{children:"Digital Agristack Transaction Enterprises"}),(0,c.jsx)("p",{children:"Empowering Agricultural Excellence"})]})]}),(0,c.jsxs)("div",{className:"form-title-section",children:[(0,c.jsx)("h2",{className:"form-title",children:"Registration Form"}),(0,c.jsx)("p",{className:"form-subtitle",children:"Enter your details to get started"})]})]}),(0,c.jsxs)("form",{onSubmit:n((async e=>{if(w)try{console.log("Submitting registration data:",e);const a=await l.R2.register(e);console.log("Registration successful:",a),alert("Registration successful! Please wait for admin approval. You will receive an email with login credentials once approved."),u(),v(!1),f(!1),h(""),j("")}catch(a){console.error("Registration error:",a),alert("Registration failed. Please try again.")}else alert("Please verify your email before submitting.")})),className:"registration-form",children:[(0,c.jsx)("input",{type:"hidden",...s("role"),value:a}),a&&(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{className:"form-label",children:"Role"}),(0,c.jsx)("input",{type:"text",value:a,readOnly:!0,className:"form-input role-field"})]}),(0,c.jsxs)("div",{className:"form-row",children:[(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsxs)("label",{className:"form-label",children:["Name ",(0,c.jsx)("span",{className:"required",children:"*"})]}),(0,c.jsx)("input",{type:"text",...s("name"),className:"form-input "+(p.name?"error":""),placeholder:"Enter your first name"}),p.name&&(0,c.jsx)("span",{className:"error-message",children:p.name.message})]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsxs)("label",{className:"form-label",children:["Gender ",(0,c.jsx)("span",{className:"required",children:"*"})]}),(0,c.jsxs)("select",{...s("gender"),className:"form-input "+(p.gender?"error":""),children:[(0,c.jsx)("option",{value:"",children:"Select gender"}),(0,c.jsx)("option",{value:"Male",children:"Male"}),(0,c.jsx)("option",{value:"Female",children:"Female"}),(0,c.jsx)("option",{value:"Other",children:"Other"})]}),p.gender&&(0,c.jsx)("span",{className:"error-message",children:p.gender.message})]})]}),(0,c.jsxs)("div",{className:"form-row",children:[(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsxs)("label",{className:"form-label",children:["Date of Birth ",(0,c.jsx)("span",{className:"required",children:"*"})]}),(0,c.jsx)("input",{type:"date",...s("dateOfBirth"),className:"form-input "+(p.dateOfBirth?"error":"")}),p.dateOfBirth&&(0,c.jsx)("span",{className:"error-message",children:p.dateOfBirth.message})]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsxs)("label",{className:"form-label",children:["Phone Number ",(0,c.jsx)("span",{className:"required",children:"*"})]}),(0,c.jsx)("input",{type:"text",...s("phoneNumber"),className:"form-input "+(p.phoneNumber?"error":""),placeholder:"Enter 10-digit number"}),p.phoneNumber&&(0,c.jsx)("span",{className:"error-message",children:p.phoneNumber.message})]})]}),(0,c.jsxs)("div",{className:"form-row",children:[(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsxs)("label",{className:"form-label",children:["Email Address ",(0,c.jsx)("span",{className:"required",children:"*"})]}),(0,c.jsx)("input",{type:"email",...s("email"),value:g,onChange:e=>{h(e.target.value),f(!1),v(!1)},className:"form-input "+(p.email?"error":""),placeholder:"Enter your email"}),p.email&&(0,c.jsx)("span",{className:"error-message",children:p.email.message})]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsxs)("label",{className:"form-label",children:["Password ",(0,c.jsx)("span",{className:"required",children:"*"})]}),(0,c.jsx)("input",{type:"password",...s("password"),className:"form-input "+(p.password?"error":""),placeholder:"Enter a strong password",autoComplete:"new-password"}),p.password&&(0,c.jsx)("span",{className:"error-message",children:p.password.message})]})]}),(0,c.jsxs)("div",{className:"email-verification",children:[!y&&!w&&(0,c.jsx)("button",{type:"button",onClick:k,className:"btn btn-primary",children:"Send OTP"}),y&&!w&&(0,c.jsxs)("div",{className:"otp-section",children:[(0,c.jsx)("input",{type:"text",placeholder:"Enter OTP",value:x,onChange:e=>j(e.target.value),className:"otp-input"}),(0,c.jsxs)("div",{className:"otp-buttons",children:[(0,c.jsx)("button",{type:"button",onClick:k,className:"btn btn-secondary",disabled:N>0,children:N>0?`Resend (${N}s)`:"Resend"}),(0,c.jsx)("button",{type:"button",onClick:async()=>{try{await l.R2.verifyOTP({email:g,otp:x}),alert("Email verified successfully!"),v(!0)}catch(e){alert("OTP verification error."),console.error(e)}},className:"btn btn-primary",children:"Verify"})]})]}),w&&(0,c.jsxs)("div",{className:"verification-success",children:[(0,c.jsx)("span",{className:"success-icon",children:"\u2713"}),"Email Verified"]})]}),(0,c.jsx)("div",{className:"form-actions",children:(0,c.jsx)("button",{type:"submit",className:"btn btn-submit",children:"Register Now ..."})}),(0,c.jsx)("div",{className:"login-link",children:(0,c.jsxs)("p",{children:["Already have an account? ",(0,c.jsx)(o.N_,{to:"/login",children:"Sign In"})]})})]})]})})]})}},476:(e,a,s)=>{s.d(a,{Ay:()=>m,Dv:()=>i,Er:()=>l,JL:()=>o,R2:()=>r,kM:()=>c,s2:()=>d,xs:()=>n});const t=s(6213).A.create({baseURL:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_URL||"http://localhost:8080/api",timeout:1e4,headers:{"Content-Type":"application/json"}});t.interceptors.request.use((e=>{const a=localStorage.getItem("token");return a&&(e.headers.Authorization=`Bearer ${a}`),e}),(e=>Promise.reject(e))),t.interceptors.response.use((e=>e),(e=>{var a;return 401===(null===(a=e.response)||void 0===a?void 0:a.status)&&(localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="/login"),Promise.reject(e)}));const r={login:async e=>(await t.post("/auth/login",e)).data,getProfile:async()=>(await t.get("/auth/profile")).data,register:async e=>(await t.post("/auth/register",e)).data,sendOTP:async e=>(await t.post("/auth/send-otp",{emailOrPhone:e})).data,verifyOTP:async e=>(await t.post("/auth/verify-otp",{emailOrPhone:e.email,otp:e.otp})).data,resendOTP:async e=>(await t.post("/auth/resend-otp",{emailOrPhone:e})).data,forgotPassword:async e=>(await t.post("/auth/forgot-password",{emailOrPhone:e})).data,forgotUserId:async e=>(await t.post("/auth/forgot-user-id",{emailOrPhone:e})).data,resetPassword:async e=>(await t.post("/auth/reset-password",e)).data,changePassword:async e=>(await t.post("/auth/change-password",e)).data,changeUserId:async e=>(await t.post("/auth/change-user-id",e)).data,getCountries:async()=>(await t.get("/auth/countries")).data,getStates:async e=>(await t.post("/auth/states",{countryId:e})).data},i={getAllUsers:async()=>(await t.get("/super-admin/registration-list")).data,getRegistrationList:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await t.get("/super-admin/registration-list",{params:e})).data},getRegistrationListByStatus:async e=>(await t.get("/super-admin/registration-list/filter",{params:{status:e}})).data,searchRegistrations:async e=>(await t.get("/super-admin/registration-list/search",{params:{query:e}})).data,getPendingRegistrations:async()=>(await t.get("/super-admin/pending-registrations")).data,getApprovedUsers:async()=>(await t.get("/super-admin/approved-users")).data,getUsersByRole:async e=>(await t.get(`/super-admin/users/by-role/${e}`)).data,getPendingUsersByRole:async e=>(await t.get(`/super-admin/pending-users/by-role/${e}`)).data,approveUser:async(e,a)=>(await t.put(`/auth/users/${e}/approve`,{role:a})).data,rejectUser:async(e,a)=>(await t.put(`/auth/users/${e}/status`,{status:"REJECTED"})).data,deleteUser:async e=>(await t.delete(`/super-admin/users/${e}`)).data,updateUser:async(e,a)=>(await t.put(`/super-admin/users/${e}`,a)).data,updateUserStatus:async(e,a)=>(await t.put(`/auth/users/${e}/status`,{status:a})).data,getDashboardStats:async()=>(await t.get("/super-admin/dashboard/stats")).data,bulkAssignFarmers:async(e,a)=>(await t.post("/super-admin/bulk-assign-farmers",{farmerIds:e,employeeId:a})).data,assignFarmer:async(e,a)=>(await t.post("/super-admin/assign-farmer",null,{params:{farmerId:e,employeeId:a}})).data},n={getAllFarmers:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await t.get("/super-admin/farmers",{params:e})).data},getFarmerById:async e=>(await t.get(`/super-admin/farmers/${e}`)).data,createFarmer:async e=>(await t.post("/super-admin/farmers",e)).data,updateFarmer:async(e,a)=>(await t.put(`/super-admin/farmers/${e}`,a)).data,deleteFarmer:async e=>(await t.delete(`/super-admin/farmers/${e}`)).data,assignFarmer:async(e,a)=>(await t.post(`/super-admin/farmers/${e}/assign`,{employeeId:a})).data,getFarmerStats:async()=>(await t.get("/super-admin/farmers/stats")).data},l={getAllFarmers:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await t.get("/admin/farmers",{params:e})).data},getAllEmployees:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await t.get("/admin/employees",{params:e})).data},getFarmersWithKyc:async()=>(await t.get("/admin/farmers-with-kyc")).data,getEmployeesWithStats:async()=>(await t.get("/admin/employees-with-stats")).data,getFarmersByEmployee:async e=>(await t.get(`/admin/employees/${e}/assigned-farmers`)).data,getTodoList:async()=>(await t.get("/admin/todo-list")).data,getEnhancedTodoList:async()=>(await t.get("/admin/enhanced-todo-list")).data,getDashboardStats:async()=>(await t.get("/admin/dashboard-stats")).data,filterFarmers:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await t.get("/admin/farmers/filter",{params:e})).data},getLocations:async()=>(await t.get("/admin/locations")).data,bulkAssignFarmers:async(e,a)=>(await t.post("/admin/bulk-assign-farmers",{farmerIds:e,employeeId:a})).data,assignFarmer:async(e,a)=>(await t.post("/admin/assign-farmer",null,{params:{farmerId:e,employeeId:a}})).data,getAssignmentHistory:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await t.get("/admin/assignment-history",{params:e})).data},getFarmersByAssignmentStatus:async e=>(await t.get("/admin/farmers/by-assignment-status",{params:{assignmentStatus:e}})).data,getAllRegistrations:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await t.get("/admin/registration-list",{params:e})).data},getRegistrationListByStatus:async e=>(await t.get("/admin/registration-list/filter",{params:{status:e}})).data,approveRegistration:async(e,a)=>(await t.post(`/admin/registrations/${e}/approve`,a)).data,rejectRegistration:async(e,a)=>(await t.post(`/admin/registrations/${e}/reject`,a)).data},d={getAllEmployees:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await t.get("/super-admin/employees",{params:e})).data},getEmployeeById:async e=>(await t.get(`/super-admin/employees/${e}`)).data,createEmployee:async e=>(await t.post("/super-admin/employees",e)).data,updateEmployee:async(e,a)=>(await t.put(`/super-admin/employees/${e}`,a)).data,deleteEmployee:async e=>(await t.delete(`/super-admin/employees/${e}`)).data,getAssignedFarmers:async e=>(await t.get(`/super-admin/employees/${e}/assigned-farmers`)).data,getEmployeeStats:async()=>(await t.get("/super-admin/employees/stats")).data},o={getAssignedFarmers:async e=>{try{console.log("\ud83d\udd04 Fetching assigned farmers from dashboard endpoint");const e=await t.get("/employees/dashboard/assigned-farmers");return console.log("\u2705 Success with dashboard endpoint"),e.data}catch(a){throw console.error("\u274c Failed to fetch assigned farmers:",a),a}},getProfile:async()=>(await t.get("/employees/profile")).data,updateProfile:async e=>(await t.put("/employees/profile",e)).data,getStats:async()=>(await t.get("/employees/stats")).data},c={uploadDocuments:async(e,a)=>{const s=new FormData;Object.keys(a).forEach((e=>{a[e]&&s.append(e,a[e])}));return(await t.post(`/employees/kyc/${e}/upload`,s,{headers:{"Content-Type":"multipart/form-data"}})).data},approveKYC:async(e,a)=>(await t.put(`/employees/kyc/approve/${e}`)).data,rejectKYC:async(e,a)=>(await t.put(`/employees/kyc/reject/${e}`,{reason:a.reason||"KYC rejected"})).data,referBackKYC:async(e,a)=>(await t.put(`/employees/kyc/refer-back/${e}`,{reason:a.reason||"KYC referred back"})).data,getKYCStatus:async e=>(await t.get(`/employees/kyc/${e}/status`)).data,getKYCDocuments:async e=>(await t.get(`/employees/kyc/${e}/documents`)).data},m=t}}]);
//# sourceMappingURL=164.36b8d69c.chunk.js.map