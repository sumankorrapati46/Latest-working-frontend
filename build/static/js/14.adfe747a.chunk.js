"use strict";(self.webpackChunkagristack_farmer_management=self.webpackChunkagristack_farmer_management||[]).push([[14],{476:(e,a,t)=>{t.d(a,{Dv:()=>r,Er:()=>l,JL:()=>d,R2:()=>i,kM:()=>g,s2:()=>c,xs:()=>o});var s=t(6213);const n=s.A.create({baseURL:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_URL||"http://localhost:8080/api",timeout:1e4,headers:{"Content-Type":"application/json"}});n.interceptors.request.use((e=>{const a=localStorage.getItem("token");return console.log("\ud83d\udd10 API Request - Token from localStorage:",a?"Present":"Missing"),console.log("\ud83d\udd10 API Request - URL:",e.url),console.log("\ud83d\udd10 API Request - Method:",e.method),a?(e.headers.Authorization=`Bearer ${a}`,console.log("\ud83d\udd10 API Request - Authorization header added")):console.log("\u26a0\ufe0f API Request - No token found in localStorage"),e}),(e=>(console.error("\u274c API Request interceptor error:",e),Promise.reject(e)))),n.interceptors.response.use((e=>e),(e=>{var a,t,s,n,i,r;if(console.error("\u274c API Response Error:",{status:null===(a=e.response)||void 0===a?void 0:a.status,statusText:null===(t=e.response)||void 0===t?void 0:t.statusText,url:null===(s=e.config)||void 0===s?void 0:s.url,method:null===(n=e.config)||void 0===n?void 0:n.method,message:e.message}),401===(null===(i=e.response)||void 0===i?void 0:i.status)||403===(null===(r=e.response)||void 0===r?void 0:r.status)){console.error("\ud83d\udd10 Authentication failed - clearing tokens and redirecting to login");["token","user","authToken","jwtToken","accessToken","refreshToken","auth","session","login"].forEach((e=>{localStorage.removeItem(e),sessionStorage.removeItem(e)})),localStorage.clear(),sessionStorage.clear(),document.cookie.split(";").forEach((function(e){document.cookie=e.replace(/^ +/,"").replace(/=.*/,"=;expires="+(new Date).toUTCString()+";path=/")})),window.location.pathname.includes("/login")||(window.location.href="/login")}return Promise.reject(e)}));const i={login:async e=>(await n.post("/auth/login",e)).data,getProfile:async()=>(await n.get("/auth/profile")).data,register:async e=>(await n.post("/auth/register",e)).data,sendOTP:async e=>(await n.post("/auth/send-otp",{emailOrPhone:e})).data,verifyOTP:async e=>(await n.post("/auth/verify-otp",{emailOrPhone:e.email,otp:e.otp})).data,resendOTP:async e=>(await n.post("/auth/resend-otp",{emailOrPhone:e})).data,forgotPassword:async e=>(await n.post("/auth/forgot-password",{emailOrPhone:e})).data,forgotUserId:async e=>(await n.post("/auth/forgot-user-id",{emailOrPhone:e})).data,resetPassword:async e=>(await n.post("/auth/reset-password",e)).data,changePassword:async e=>(await n.post("/auth/change-password",e)).data,resetPasswordConfirm:async e=>(await n.post("/auth/reset-password/confirm",e)).data,changeUserId:async e=>(await n.post("/auth/change-user-id",e)).data,getCountries:async()=>(await n.get("/auth/countries")).data,getStates:async e=>(await n.post("/auth/states",{countryId:e})).data},r={getAllUsers:async()=>(await n.get("/super-admin/registration-list")).data,getRegistrationList:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await n.get("/super-admin/registration-list",{params:e})).data},getRegistrationListByStatus:async e=>(await n.get("/super-admin/registration-list/filter",{params:{status:e}})).data,searchRegistrations:async e=>(await n.get("/super-admin/registration-list/search",{params:{query:e}})).data,getPendingRegistrations:async()=>(await n.get("/super-admin/pending-registrations")).data,getApprovedUsers:async()=>(await n.get("/super-admin/approved-users")).data,getUsersByRole:async e=>(await n.get(`/super-admin/users/by-role/${e}`)).data,getPendingUsersByRole:async e=>(await n.get(`/super-admin/pending-users/by-role/${e}`)).data,approveUser:async(e,a)=>(await n.put(`/auth/users/${e}/approve`,{role:a})).data,rejectUser:async(e,a)=>(await n.put(`/auth/users/${e}/status`,{status:"REJECTED"})).data,deleteUser:async e=>(await n.delete(`/super-admin/users/${e}`)).data,updateUser:async(e,a)=>(await n.put(`/super-admin/users/${e}`,a)).data,updateUserStatus:async(e,a)=>(await n.put(`/auth/users/${e}/status`,{status:a})).data,getDashboardStats:async()=>(await n.get("/super-admin/dashboard/stats")).data,bulkAssignFarmers:async(e,a)=>(await n.post("/super-admin/bulk-assign-farmers",{farmerIds:e,employeeId:a})).data,assignFarmer:async(e,a)=>(await n.post("/super-admin/assign-farmer",null,{params:{farmerId:e,employeeId:a}})).data},o={getAllFarmers:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await n.get("/super-admin/farmers",{params:e})).data},getFarmerById:async e=>(await n.get(`/super-admin/farmers/${e}`)).data,createFarmer:async e=>(await n.post("/super-admin/farmers",e)).data,updateFarmer:async(e,a)=>(await n.put(`/super-admin/farmers/${e}`,a)).data,deleteFarmer:async e=>(await n.delete(`/super-admin/farmers/${e}`)).data,assignFarmer:async(e,a)=>(await n.post(`/super-admin/farmers/${e}/assign`,{employeeId:a})).data,getFarmerStats:async()=>(await n.get("/super-admin/farmers/stats")).data},l={getAllFarmers:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await n.get("/admin/farmers",{params:e})).data},getAllEmployees:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await n.get("/admin/employees",{params:e})).data},getFarmersWithKyc:async()=>(await n.get("/admin/farmers-with-kyc")).data,getEmployeesWithStats:async()=>(await n.get("/admin/employees-with-stats")).data,getFarmersByEmployee:async e=>(await n.get(`/admin/employees/${e}/assigned-farmers`)).data,getTodoList:async()=>(await n.get("/admin/todo-list")).data,getEnhancedTodoList:async()=>(await n.get("/admin/enhanced-todo-list")).data,getDashboardStats:async()=>(await n.get("/admin/dashboard-stats")).data,filterFarmers:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await n.get("/admin/farmers/filter",{params:e})).data},getLocations:async()=>(await n.get("/admin/locations")).data,bulkAssignFarmers:async(e,a)=>(await n.post("/admin/bulk-assign-farmers",{farmerIds:e,employeeId:a})).data,assignFarmer:async(e,a)=>(await n.post("/admin/assign-farmer",null,{params:{farmerId:e,employeeId:a}})).data,getAssignmentHistory:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await n.get("/admin/assignment-history",{params:e})).data},getFarmersByAssignmentStatus:async e=>(await n.get("/admin/farmers/by-assignment-status",{params:{assignmentStatus:e}})).data,getAllRegistrations:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await n.get("/admin/registration-list",{params:e})).data},getRegistrationListByStatus:async e=>(await n.get("/admin/registration-list/filter",{params:{status:e}})).data,approveRegistration:async(e,a)=>(await n.post(`/admin/registrations/${e}/approve`,a)).data,rejectRegistration:async(e,a)=>(await n.post(`/admin/registrations/${e}/reject`,a)).data},c={getAllEmployees:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await n.get("/super-admin/employees",{params:e})).data},getEmployeeById:async e=>(await n.get(`/super-admin/employees/${e}`)).data,createEmployee:async e=>(await n.post("/super-admin/employees",e)).data,updateEmployee:async(e,a)=>(await n.put(`/super-admin/employees/${e}`,a)).data,deleteEmployee:async e=>(await n.delete(`/super-admin/employees/${e}`)).data,getEmployeeStats:async()=>(await n.get("/super-admin/employees/stats")).data},d={getAssignedFarmers:async()=>(await n.get("/employee/assigned-farmers")).data,getFarmerById:async e=>(await n.get(`/employee/farmers/${e}`)).data,updateFarmer:async(e,a)=>(await n.put(`/employee/farmers/${e}`,a)).data,getProfile:async()=>(await n.get("/employee/profile")).data,updateProfile:async e=>(await n.put("/employee/profile",e)).data},g={approveKYC:async(e,a)=>(await n.post(`/kyc/${e}/approve`,a)).data,rejectKYC:async(e,a)=>(await n.post(`/kyc/${e}/reject`,a)).data,referBackKYC:async(e,a)=>(await n.post(`/kyc/${e}/refer-back`,a)).data,getKYCStatus:async e=>(await n.get(`/kyc/${e}/status`)).data,uploadKYCDocuments:async(e,a)=>{const t=new FormData;Object.keys(a).forEach((e=>{a[e]&&(Array.isArray(a[e])?a[e].forEach(((a,s)=>{t.append(`${e}[${s}]`,a)})):t.append(e,a[e]))}));const n=s.A.create({baseURL:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_URL||"http://localhost:8080/api",timeout:3e4});n.interceptors.request.use((e=>{const a=localStorage.getItem("token");return a&&(e.headers.Authorization=`Bearer ${a}`),e}));return(await n.post(`/kyc/${e}/upload`,t,{headers:{"Content-Type":"multipart/form-data"}})).data},getKYCHistory:async e=>(await n.get(`/kyc/${e}/history`)).data,getKYCDocumentUrl:async(e,a)=>(await n.get(`/kyc/${e}/documents/${a}/download`)).data,deleteKYCDocument:async(e,a)=>(await n.delete(`/kyc/${e}/documents/${a}`)).data}},4003:()=>{},4513:(e,a,t)=>{e.exports=t.p+"static/media/rightlogo.1742b4514aa334820279.png"},7014:(e,a,t)=>{t.r(a),t.d(a,{default:()=>d});var s=t(5043),n=t(3216),i=t(5016),r=t(476),o=t(4513),l=(t(4003),t(579));const c=()=>{const e="abcdefghijklmnopqrstuvwxyz0123456789";let a="";for(let t=0;t<5;t++)a+=e.charAt(Math.floor(36*Math.random()));return a},d=()=>{const e=(0,n.Zp)(),{login:a}=(0,i.As)(),[t,d]=(0,s.useState)(""),[g,p]=(0,s.useState)(""),[m,u]=(0,s.useState)("official"),[h,y]=(0,s.useState)(""),[f,w]=(0,s.useState)(c()),[x,v]=(0,s.useState)(!1),[j,N]=(0,s.useState)(""),[b,k]=(0,s.useState)(!1);(0,s.useEffect)((()=>{w(c()),S()}),[]);const S=()=>{console.log("\ud83e\uddf9 Clearing all authentication data...");["token","user","authToken","jwtToken","accessToken","refreshToken","auth","session","login"].forEach((e=>{localStorage.removeItem(e),sessionStorage.removeItem(e)})),localStorage.clear(),sessionStorage.clear(),document.cookie.split(";").forEach((function(e){document.cookie=e.replace(/^ +/,"").replace(/=.*/,"=;expires="+(new Date).toUTCString()+";path=/")})),window.indexedDB&&indexedDB.deleteDatabase("firebaseLocalStorage"),console.log("\u2705 All authentication data cleared")},E=e=>{u(e),N(""),y(""),w(c())};return(0,l.jsxs)("div",{className:"login-page-container",children:[(0,l.jsx)("header",{className:"login-page-header",children:(0,l.jsxs)("div",{className:"login-page-header-content",children:[(0,l.jsxs)("div",{className:"login-page-header-left",children:[(0,l.jsx)("div",{className:"login-page-header-logo",children:(0,l.jsx)("img",{src:o,alt:"DATE Logo",className:"header-logo"})}),(0,l.jsxs)("div",{className:"login-page-header-date",children:[(0,l.jsx)("span",{className:"date-icon"}),(0,l.jsx)("span",{className:"date-text",children:(new Date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]})]}),(0,l.jsx)("nav",{className:"login-page-header-nav",children:(0,l.jsxs)("ul",{className:"login-page-header-menu",children:[(0,l.jsx)("li",{children:(0,l.jsx)("button",{onClick:()=>e("/menu"),className:"header-menu-link",children:"Menu"})}),(0,l.jsx)("li",{children:(0,l.jsx)("button",{onClick:()=>e("/analytical-dashboard"),className:"header-menu-link",children:"Dashboard"})}),(0,l.jsx)("li",{children:(0,l.jsx)("button",{onClick:()=>e("/about"),className:"header-menu-link",children:"About"})})]})})]})}),(0,l.jsxs)("div",{className:"login-page-main-content",children:[(0,l.jsxs)("div",{className:"login-page-info-panel",children:[(0,l.jsxs)("div",{className:"login-page-brand-header",children:[(0,l.jsxs)("div",{className:"login-page-brand-logo",children:[(0,l.jsx)("span",{className:"login-page-brand-text",children:"Date"}),(0,l.jsx)("span",{className:"login-page-brand-accent",children:"Agri"}),(0,l.jsx)("span",{className:"login-page-brand-icon",children:"\ud83c\udf3f"}),(0,l.jsx)("span",{className:"login-page-brand-text",children:"Stack"})]}),(0,l.jsx)("h1",{className:"login-page-main-title",children:"India Farmer Registry"})]}),(0,l.jsxs)("div",{className:"login-page-platform-info",children:[(0,l.jsx)("h2",{children:"Digital Agristack Transaction Enterprises"}),(0,l.jsx)("p",{className:"login-page-tagline",children:"Empowering Agricultural Excellence"})]}),(0,l.jsxs)("div",{className:"login-page-features-grid",children:[(0,l.jsxs)("div",{className:"login-page-feature-card",children:[(0,l.jsx)("div",{className:"login-page-feature-icon",children:"\ud83c\udf3e"}),(0,l.jsxs)("div",{className:"login-page-feature-content",children:[(0,l.jsx)("h3",{children:"Revolutionizing Indian Agriculture"}),(0,l.jsx)("p",{children:"Connecting 140+ million farmers with cutting-edge digital solutions"})]})]}),(0,l.jsxs)("div",{className:"login-page-feature-card",children:[(0,l.jsx)("div",{className:"login-page-feature-icon",children:"\ud83d\udcf1"}),(0,l.jsxs)("div",{className:"login-page-feature-content",children:[(0,l.jsx)("h3",{children:"Smart Farming Technology"}),(0,l.jsx)("p",{children:"AI-powered crop monitoring and precision agriculture tools"})]})]}),(0,l.jsxs)("div",{className:"login-page-feature-card",children:[(0,l.jsx)("div",{className:"login-page-feature-icon",children:"\ud83d\udcb0"}),(0,l.jsxs)("div",{className:"login-page-feature-content",children:[(0,l.jsx)("h3",{children:"Financial Inclusion"}),(0,l.jsx)("p",{children:"Direct benefit transfers and digital payment solutions"})]})]}),(0,l.jsxs)("div",{className:"login-page-feature-card",children:[(0,l.jsx)("div",{className:"login-page-feature-icon",children:"\ud83c\udf31"}),(0,l.jsxs)("div",{className:"login-page-feature-content",children:[(0,l.jsx)("h3",{children:"Sustainable Practices"}),(0,l.jsx)("p",{children:"Promoting eco-friendly farming and climate-smart agriculture"})]})]}),(0,l.jsxs)("div",{className:"login-page-feature-card",children:[(0,l.jsx)("div",{className:"login-page-feature-icon",children:"\ud83c\udfc6"}),(0,l.jsxs)("div",{className:"login-page-feature-content",children:[(0,l.jsx)("h3",{children:"National Recognition"}),(0,l.jsx)("p",{children:"Government of India's flagship agricultural digitization initiative"})]})]})]})]}),(0,l.jsx)("div",{className:"login-page-form-section",children:(0,l.jsxs)("div",{className:"login-page-card",children:[(0,l.jsxs)("div",{className:"login-page-date-logo-section",children:[(0,l.jsx)("img",{src:o,alt:"DATE Logo",className:"login-page-date-logo"}),(0,l.jsxs)("div",{className:"login-page-date-text",children:[(0,l.jsx)("h3",{children:"Digital Agristack Transaction Enterprises"}),(0,l.jsx)("p",{children:"Empowering Agricultural Excellence"})]})]}),(0,l.jsxs)("div",{className:"login-page-login-type-section",children:[(0,l.jsx)("h3",{children:"Log In as"}),(0,l.jsxs)("div",{className:"login-page-login-type-toggle",children:[(0,l.jsx)("button",{type:"button",className:"login-page-toggle-btn "+("official"===m?"login-page-active":""),onClick:()=>E("official"),children:"Official"}),(0,l.jsx)("button",{type:"button",className:"login-page-toggle-btn "+("fpo"===m?"login-page-active":""),onClick:()=>E("fpo"),children:"FPO"}),(0,l.jsx)("button",{type:"button",className:"login-page-toggle-btn "+("employee"===m?"login-page-active":""),onClick:()=>E("employee"),children:"Employee"}),(0,l.jsx)("button",{type:"button",className:"login-page-toggle-btn "+("farmer"===m?"login-page-active":""),onClick:()=>E("farmer"),children:"Farmer"})]})]}),(0,l.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),N(""),k(!0),h.trim().toLowerCase()!==f.toLowerCase())return N("Captcha does not match."),k(!1),w(c()),void y("");try{localStorage.clear(),sessionStorage.clear();const e={userName:t,password:g};console.log("\ud83d\udd0d Attempting login with:",e);const a=await r.R2.login(e),{token:s,user:n,message:i}=a;console.log("\u2705 Login successful:",i),localStorage.setItem("token",s),localStorage.setItem("user",JSON.stringify(n));switch(n.role){case"SUPER_ADMIN":window.location.href="/super-admin/dashboard";break;case"ADMIN":window.location.href="/admin/dashboard";break;case"EMPLOYEE":window.location.href="/employee/dashboard";break;case"FARMER":window.location.href="/farmer/dashboard";break;default:window.location.href="/dashboard"}}catch(j){var a,s;console.error("\u274c Login failed:",j),N((null===(a=j.response)||void 0===a||null===(s=a.data)||void 0===s?void 0:s.message)||"Login failed"),k(!1),w(c()),y("")}finally{k(!1)}},className:"login-page-form",children:[(0,l.jsxs)("div",{className:"login-page-form-field",children:[(0,l.jsx)("label",{children:"Insert Registered Mobile Number as Username"}),(0,l.jsx)("input",{type:"text",value:t,onChange:e=>d(e.target.value),required:!0,disabled:b,placeholder:"Enter username"})]}),(0,l.jsxs)("div",{className:"login-page-form-field",children:[(0,l.jsx)("label",{children:"Enter password"}),(0,l.jsxs)("div",{className:"login-page-password-input-container",children:[(0,l.jsx)("input",{type:x?"text":"password",value:g,onChange:e=>p(e.target.value),placeholder:"Enter password",required:!0,disabled:b}),(0,l.jsx)("button",{type:"button",className:"login-page-eye-icon",onClick:()=>v(!x),children:"\ud83d\udc41\ufe0f"})]})]}),(0,l.jsxs)("div",{className:"login-page-forgot-password",children:[(0,l.jsx)("a",{href:"/forgot-password",children:"Forgot Password?"}),(0,l.jsx)("span",{className:"login-page-separator",children:"|"}),(0,l.jsx)("a",{href:"/forgot-userid",children:"Forgot User ID?"})]}),(0,l.jsxs)("div",{className:"login-page-captcha-section",children:[(0,l.jsx)("label",{children:"Captcha"}),(0,l.jsxs)("div",{className:"login-page-captcha-container",children:[(0,l.jsx)("div",{className:"login-page-captcha-image",children:(0,l.jsx)("span",{children:f})}),(0,l.jsx)("button",{type:"button",className:"login-page-refresh-captcha",onClick:()=>{w(c()),y("")},children:"\ud83d\udd04"}),(0,l.jsx)("input",{type:"text",value:h,onChange:e=>y(e.target.value),placeholder:"Enter Captcha",className:"login-page-captcha-input"})]})]}),j&&(0,l.jsx)("div",{className:"login-page-error-message",children:j}),(0,l.jsxs)("div",{className:"login-page-actions-row",children:[(0,l.jsx)("button",{type:"submit",className:"login-page-login-btn",disabled:b,children:b?"Logging in...":"Log In"}),("employee"===m||"farmer"===m||"fpo"===m)&&(0,l.jsx)("button",{type:"button",className:"login-page-create-account-btn",onClick:()=>{"employee"===m?e("/register-employee",{state:{role:"EMPLOYEE"}}):"farmer"===m?e("/register-farmer",{state:{role:"FARMER"}}):"fpo"===m&&e("/register-fpo",{state:{role:"FPO"}})},children:"Create New user Acount"})]})]})]})})]})]})}}}]);
//# sourceMappingURL=14.adfe747a.chunk.js.map