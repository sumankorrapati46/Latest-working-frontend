"use strict";(self.webpackChunkagristack_farmer_management=self.webpackChunkagristack_farmer_management||[]).push([[795],{476:(a,e,t)=>{t.d(e,{Ay:()=>p,Dv:()=>r,Er:()=>o,JL:()=>d,R2:()=>i,kM:()=>l,s2:()=>c,xs:()=>n});const s=t(6213).A.create({baseURL:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_URL||"http://localhost:8080/api",timeout:1e4,headers:{"Content-Type":"application/json"}});s.interceptors.request.use((a=>{const e=localStorage.getItem("token");return e&&(a.headers.Authorization=`Bearer ${e}`),a}),(a=>Promise.reject(a))),s.interceptors.response.use((a=>a),(a=>{var e;return 401===(null===(e=a.response)||void 0===e?void 0:e.status)&&(localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="/login"),Promise.reject(a)}));const i={login:async a=>(await s.post("/auth/login",a)).data,getProfile:async()=>(await s.get("/auth/profile")).data,register:async a=>(await s.post("/auth/register",a)).data,sendOTP:async a=>(await s.post("/auth/send-otp",{emailOrPhone:a})).data,verifyOTP:async a=>(await s.post("/auth/verify-otp",{emailOrPhone:a.email,otp:a.otp})).data,resendOTP:async a=>(await s.post("/auth/resend-otp",{emailOrPhone:a})).data,forgotPassword:async a=>(await s.post("/auth/forgot-password",{emailOrPhone:a})).data,forgotUserId:async a=>(await s.post("/auth/forgot-user-id",{emailOrPhone:a})).data,resetPassword:async a=>(await s.post("/auth/reset-password",a)).data,changePassword:async a=>(await s.post("/auth/change-password",a)).data,changeUserId:async a=>(await s.post("/auth/change-user-id",a)).data,getCountries:async()=>(await s.get("/auth/countries")).data,getStates:async a=>(await s.post("/auth/states",{countryId:a})).data},r={getAllUsers:async()=>(await s.get("/super-admin/registration-list")).data,getRegistrationList:async function(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await s.get("/super-admin/registration-list",{params:a})).data},getRegistrationListByStatus:async a=>(await s.get("/super-admin/registration-list/filter",{params:{status:a}})).data,searchRegistrations:async a=>(await s.get("/super-admin/registration-list/search",{params:{query:a}})).data,getPendingRegistrations:async()=>(await s.get("/super-admin/pending-registrations")).data,getApprovedUsers:async()=>(await s.get("/super-admin/approved-users")).data,getUsersByRole:async a=>(await s.get(`/super-admin/users/by-role/${a}`)).data,getPendingUsersByRole:async a=>(await s.get(`/super-admin/pending-users/by-role/${a}`)).data,approveUser:async(a,e)=>(await s.put(`/auth/users/${a}/approve`,{role:e})).data,rejectUser:async(a,e)=>(await s.put(`/auth/users/${a}/status`,{status:"REJECTED"})).data,deleteUser:async a=>(await s.delete(`/super-admin/users/${a}`)).data,updateUser:async(a,e)=>(await s.put(`/super-admin/users/${a}`,e)).data,updateUserStatus:async(a,e)=>(await s.put(`/auth/users/${a}/status`,{status:e})).data,getDashboardStats:async()=>(await s.get("/super-admin/dashboard/stats")).data,bulkAssignFarmers:async(a,e)=>(await s.post("/super-admin/bulk-assign-farmers",{farmerIds:a,employeeId:e})).data,assignFarmer:async(a,e)=>(await s.post("/super-admin/assign-farmer",null,{params:{farmerId:a,employeeId:e}})).data},n={getAllFarmers:async function(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await s.get("/super-admin/farmers",{params:a})).data},getFarmerById:async a=>(await s.get(`/super-admin/farmers/${a}`)).data,createFarmer:async a=>(await s.post("/super-admin/farmers",a)).data,updateFarmer:async(a,e)=>(await s.put(`/super-admin/farmers/${a}`,e)).data,deleteFarmer:async a=>(await s.delete(`/super-admin/farmers/${a}`)).data,assignFarmer:async(a,e)=>(await s.post(`/super-admin/farmers/${a}/assign`,{employeeId:e})).data,getFarmerStats:async()=>(await s.get("/super-admin/farmers/stats")).data},o={getAllFarmers:async function(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await s.get("/admin/farmers",{params:a})).data},getAllEmployees:async function(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await s.get("/admin/employees",{params:a})).data},getFarmersWithKyc:async()=>(await s.get("/admin/farmers-with-kyc")).data,getEmployeesWithStats:async()=>(await s.get("/admin/employees-with-stats")).data,getFarmersByEmployee:async a=>(await s.get(`/admin/employees/${a}/assigned-farmers`)).data,getTodoList:async()=>(await s.get("/admin/todo-list")).data,getEnhancedTodoList:async()=>(await s.get("/admin/enhanced-todo-list")).data,getDashboardStats:async()=>(await s.get("/admin/dashboard-stats")).data,filterFarmers:async function(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await s.get("/admin/farmers/filter",{params:a})).data},getLocations:async()=>(await s.get("/admin/locations")).data,bulkAssignFarmers:async(a,e)=>(await s.post("/admin/bulk-assign-farmers",{farmerIds:a,employeeId:e})).data,assignFarmer:async(a,e)=>(await s.post("/admin/assign-farmer",null,{params:{farmerId:a,employeeId:e}})).data,getAssignmentHistory:async function(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await s.get("/admin/assignment-history",{params:a})).data},getFarmersByAssignmentStatus:async a=>(await s.get("/admin/farmers/by-assignment-status",{params:{assignmentStatus:a}})).data,getAllRegistrations:async function(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await s.get("/admin/registration-list",{params:a})).data},getRegistrationListByStatus:async a=>(await s.get("/admin/registration-list/filter",{params:{status:a}})).data,approveRegistration:async(a,e)=>(await s.post(`/admin/registrations/${a}/approve`,e)).data,rejectRegistration:async(a,e)=>(await s.post(`/admin/registrations/${a}/reject`,e)).data},c={getAllEmployees:async function(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await s.get("/super-admin/employees",{params:a})).data},getEmployeeById:async a=>(await s.get(`/super-admin/employees/${a}`)).data,createEmployee:async a=>(await s.post("/super-admin/employees",a)).data,updateEmployee:async(a,e)=>(await s.put(`/super-admin/employees/${a}`,e)).data,deleteEmployee:async a=>(await s.delete(`/super-admin/employees/${a}`)).data,getAssignedFarmers:async a=>(await s.get(`/super-admin/employees/${a}/assigned-farmers`)).data,getEmployeeStats:async()=>(await s.get("/super-admin/employees/stats")).data},d={getAssignedFarmers:async a=>{try{console.log("\ud83d\udd04 Fetching assigned farmers from dashboard endpoint");const a=await s.get("/employees/dashboard/assigned-farmers");return console.log("\u2705 Success with dashboard endpoint"),a.data}catch(e){throw console.error("\u274c Failed to fetch assigned farmers:",e),e}},getProfile:async()=>(await s.get("/employees/profile")).data,updateProfile:async a=>(await s.put("/employees/profile",a)).data,getStats:async()=>(await s.get("/employees/stats")).data},l={uploadDocuments:async(a,e)=>{const t=new FormData;Object.keys(e).forEach((a=>{e[a]&&t.append(a,e[a])}));return(await s.post(`/employees/kyc/${a}/upload`,t,{headers:{"Content-Type":"multipart/form-data"}})).data},approveKYC:async(a,e)=>(await s.put(`/employees/kyc/approve/${a}`)).data,rejectKYC:async(a,e)=>(await s.put(`/employees/kyc/reject/${a}`,{reason:e.reason||"KYC rejected"})).data,referBackKYC:async(a,e)=>(await s.put(`/employees/kyc/refer-back/${a}`,{reason:e.reason||"KYC referred back"})).data,getKYCStatus:async a=>(await s.get(`/employees/kyc/${a}/status`)).data,getKYCDocuments:async a=>(await s.get(`/employees/kyc/${a}/documents`)).data},p=s},1795:(a,e,t)=>{t.r(e),t.d(e,{default:()=>o});var s=t(5043),i=t(3216),r=t(476),n=(t(4003),t(579));const o=()=>{const[a,e]=(0,s.useState)(""),[t,o]=(0,s.useState)(30),[c,d]=(0,s.useState)(!1),l=(0,i.Zp)(),p=(0,i.zy)(),{target:g,type:m}=p.state||{};(0,s.useEffect)((()=>{g&&m||(alert("Invalid navigation \u2013 redirecting."),l("/forgot-password"))}),[g,m,l]),(0,s.useEffect)((()=>{if(0===t)return void d(!0);const a=setInterval((()=>o((a=>a-1))),1e3);return()=>clearInterval(a)}),[t]);return(0,n.jsxs)("div",{className:"otp-verification-page-container",children:[(0,n.jsxs)("nav",{className:"otp-verification-page-navbar",children:[(0,n.jsx)("div",{className:"otp-verification-page-logo",children:(0,n.jsx)("span",{children:"DATE"})}),(0,n.jsxs)("div",{className:"otp-verification-page-nav-links",children:[(0,n.jsx)("a",{href:"#dashboard",children:"Dashboard"}),(0,n.jsx)("span",{className:"otp-verification-page-nav-dot",children:"\u2022"}),(0,n.jsx)("a",{href:"#enrollment",children:"Check Enrollment Status"}),(0,n.jsx)("span",{className:"otp-verification-page-nav-dot",children:"\u2022"}),(0,n.jsx)("a",{href:"#csc",children:"Login with CSC"})]})]}),(0,n.jsxs)("div",{className:"otp-verification-page-main-content",children:[(0,n.jsxs)("div",{className:"otp-verification-page-info-panel",children:[(0,n.jsxs)("div",{className:"otp-verification-page-agri-stack-header",children:[(0,n.jsxs)("h1",{className:"otp-verification-page-agri-stack-title",children:[(0,n.jsx)("span",{className:"otp-verification-page-agri-text",children:"Date"}),(0,n.jsx)("span",{className:"otp-verification-page-agri-text",children:"Agri"}),(0,n.jsx)("span",{className:"otp-verification-page-leaf-icon",children:"\ud83c\udf3f"}),(0,n.jsx)("span",{className:"otp-verification-page-stack-text",children:"Stack"})]}),(0,n.jsx)("h2",{className:"otp-verification-page-registry-title",children:"India Farmer Registry"})]}),(0,n.jsxs)("div",{className:"otp-verification-page-registry-info",children:[(0,n.jsx)("h3",{children:"Digital Agristack Transaction Enterprises"}),(0,n.jsx)("p",{className:"otp-verification-page-help-desk",children:"Empowering Agricultural Excellence"})]}),(0,n.jsxs)("div",{className:"otp-verification-page-agricultural-highlights",children:[(0,n.jsxs)("div",{className:"otp-verification-page-highlight-item",children:[(0,n.jsx)("span",{className:"otp-verification-page-highlight-icon",children:"\ud83c\udf3e"}),(0,n.jsxs)("div",{className:"otp-verification-page-highlight-content",children:[(0,n.jsx)("h4",{children:"Revolutionizing Indian Agriculture"}),(0,n.jsx)("p",{children:"Connecting 140+ million farmers with cutting-edge digital solutions"})]})]}),(0,n.jsxs)("div",{className:"otp-verification-page-highlight-item",children:[(0,n.jsx)("span",{className:"otp-verification-page-highlight-icon",children:"\ud83d\udcf1"}),(0,n.jsxs)("div",{className:"otp-verification-page-highlight-content",children:[(0,n.jsx)("h4",{children:"Smart Farming Technology"}),(0,n.jsx)("p",{children:"AI-powered crop monitoring and precision agriculture tools"})]})]}),(0,n.jsxs)("div",{className:"otp-verification-page-highlight-item",children:[(0,n.jsx)("span",{className:"otp-verification-page-highlight-icon",children:"\ud83d\udcb0"}),(0,n.jsxs)("div",{className:"otp-verification-page-highlight-content",children:[(0,n.jsx)("h4",{children:"Financial Inclusion"}),(0,n.jsx)("p",{children:"Direct benefit transfers and digital payment solutions"})]})]}),(0,n.jsxs)("div",{className:"otp-verification-page-highlight-item",children:[(0,n.jsx)("span",{className:"otp-verification-page-highlight-icon",children:"\ud83c\udf31"}),(0,n.jsxs)("div",{className:"otp-verification-page-highlight-content",children:[(0,n.jsx)("h4",{children:"Sustainable Practices"}),(0,n.jsx)("p",{children:"Promoting eco-friendly farming and climate-smart agriculture"})]})]}),(0,n.jsxs)("div",{className:"otp-verification-page-highlight-item",children:[(0,n.jsx)("span",{className:"otp-verification-page-highlight-icon",children:"\ud83c\udfc6"}),(0,n.jsxs)("div",{className:"otp-verification-page-highlight-content",children:[(0,n.jsx)("h4",{children:"National Recognition"}),(0,n.jsx)("p",{children:"Government of India's flagship agricultural digitization initiative"})]})]})]})]}),(0,n.jsx)("div",{className:"otp-verification-page-form-section",children:(0,n.jsxs)("div",{className:"otp-verification-page-card",children:[(0,n.jsxs)("div",{className:"otp-verification-page-date-logo-section",children:[(0,n.jsx)("div",{className:"otp-verification-page-date-logo",children:"DATE"}),(0,n.jsxs)("div",{className:"otp-verification-page-date-text",children:[(0,n.jsx)("h3",{children:"Digital Agristack Transaction Enterprises"}),(0,n.jsx)("p",{children:"Empowering Agricultural Excellence"})]})]}),(0,n.jsxs)("div",{className:"otp-verification-page-content",children:[(0,n.jsx)("h2",{children:"Email Verification"}),(0,n.jsxs)("p",{children:["We sent a 6-digit code to ",(0,n.jsx)("strong",{children:g})]}),(0,n.jsxs)("form",{children:[(0,n.jsxs)("div",{className:"otp-verification-page-form-field",children:[(0,n.jsx)("label",{htmlFor:"otpInput",children:"Enter OTP"}),(0,n.jsx)("input",{id:"otpInput",className:"otp-verification-page-otp-input",maxLength:6,value:a,onChange:a=>e(a.target.value.replace(/\D/g,""))})]}),(0,n.jsx)("div",{className:"otp-verification-page-resend-otp",children:c?(0,n.jsx)("button",{onClick:async()=>{if(c)try{await r.R2.resendOTP(g),alert("OTP resent!"),o(30),d(!1),e("")}catch(a){console.error(a),alert("Could not resend OTP.")}},className:"otp-verification-page-resend-btn",children:"Resend OTP"}):(0,n.jsxs)("span",{className:"otp-verification-page-resend-timer",children:["Resend in ",t,"s"]})}),(0,n.jsxs)("div",{className:"otp-verification-page-buttons",children:[(0,n.jsx)("button",{className:"otp-verification-page-login-btn",onClick:async()=>{if(6===a.length)try{await r.R2.verifyOTP({email:g,otp:a}),alert("OTP verified \u2714\ufe0f"),l("userId"===m?"/change-userid":"/change-password",{state:{target:g}})}catch(e){console.error(e),alert("Invalid or expired OTP.")}else alert("Enter a 6\u2011digit OTP")},children:"Verify"}),(0,n.jsx)("button",{className:"otp-verification-page-create-account-btn",onClick:()=>l(-1),children:"Back"})]})]})]})]})})]})]})}},4003:()=>{}}]);
//# sourceMappingURL=795.b6540ed1.chunk.js.map