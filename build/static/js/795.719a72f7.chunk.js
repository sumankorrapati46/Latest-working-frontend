"use strict";(self.webpackChunkagristack_farmer_management=self.webpackChunkagristack_farmer_management||[]).push([[795],{476:(a,e,t)=>{t.d(e,{Dv:()=>i,Er:()=>d,JL:()=>l,R2:()=>n,kM:()=>g,s2:()=>c,xs:()=>o});var s=t(6213);const r=s.A.create({baseURL:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_URL||"http://localhost:8080/api",timeout:1e4,headers:{"Content-Type":"application/json"}});r.interceptors.request.use((a=>{const e=localStorage.getItem("token");return console.log("\ud83d\udd10 API Request - Token from localStorage:",e?"Present":"Missing"),console.log("\ud83d\udd10 API Request - URL:",a.url),console.log("\ud83d\udd10 API Request - Method:",a.method),e?(a.headers.Authorization=`Bearer ${e}`,console.log("\ud83d\udd10 API Request - Authorization header added")):console.log("\u26a0\ufe0f API Request - No token found in localStorage"),a}),(a=>(console.error("\u274c API Request interceptor error:",a),Promise.reject(a)))),r.interceptors.response.use((a=>a),(a=>{var e,t,s,r,n,i;if(console.error("\u274c API Response Error:",{status:null===(e=a.response)||void 0===e?void 0:e.status,statusText:null===(t=a.response)||void 0===t?void 0:t.statusText,url:null===(s=a.config)||void 0===s?void 0:s.url,method:null===(r=a.config)||void 0===r?void 0:r.method,message:a.message}),401===(null===(n=a.response)||void 0===n?void 0:n.status)||403===(null===(i=a.response)||void 0===i?void 0:i.status)){console.error("\ud83d\udd10 Authentication failed - clearing tokens and redirecting to login");["token","user","authToken","jwtToken","accessToken","refreshToken","auth","session","login"].forEach((a=>{localStorage.removeItem(a),sessionStorage.removeItem(a)})),localStorage.clear(),sessionStorage.clear(),document.cookie.split(";").forEach((function(a){document.cookie=a.replace(/^ +/,"").replace(/=.*/,"=;expires="+(new Date).toUTCString()+";path=/")})),window.location.pathname.includes("/login")||(window.location.href="/login")}return Promise.reject(a)}));const n={login:async a=>(await r.post("/auth/login",a)).data,getProfile:async()=>(await r.get("/auth/profile")).data,register:async a=>(await r.post("/auth/register",a)).data,sendOTP:async a=>(await r.post("/auth/send-otp",{emailOrPhone:a})).data,verifyOTP:async a=>(await r.post("/auth/verify-otp",{emailOrPhone:a.email,otp:a.otp})).data,resendOTP:async a=>(await r.post("/auth/resend-otp",{emailOrPhone:a})).data,forgotPassword:async a=>(await r.post("/auth/forgot-password",{emailOrPhone:a})).data,forgotUserId:async a=>(await r.post("/auth/forgot-user-id",{emailOrPhone:a})).data,resetPassword:async a=>(await r.post("/auth/reset-password",a)).data,changePassword:async a=>(await r.post("/auth/change-password",a)).data,resetPasswordConfirm:async a=>(await r.post("/auth/reset-password/confirm",a)).data,changeUserId:async a=>(await r.post("/auth/change-user-id",a)).data,getCountries:async()=>(await r.get("/auth/countries")).data,getStates:async a=>(await r.post("/auth/states",{countryId:a})).data},i={getAllUsers:async()=>(await r.get("/super-admin/registration-list")).data,getRegistrationList:async function(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await r.get("/super-admin/registration-list",{params:a})).data},getRegistrationListByStatus:async a=>(await r.get("/super-admin/registration-list/filter",{params:{status:a}})).data,searchRegistrations:async a=>(await r.get("/super-admin/registration-list/search",{params:{query:a}})).data,getPendingRegistrations:async()=>(await r.get("/super-admin/pending-registrations")).data,getApprovedUsers:async()=>(await r.get("/super-admin/approved-users")).data,getUsersByRole:async a=>(await r.get(`/super-admin/users/by-role/${a}`)).data,getPendingUsersByRole:async a=>(await r.get(`/super-admin/pending-users/by-role/${a}`)).data,approveUser:async(a,e)=>(await r.put(`/auth/users/${a}/approve`,{role:e})).data,rejectUser:async(a,e)=>(await r.put(`/auth/users/${a}/status`,{status:"REJECTED"})).data,deleteUser:async a=>(await r.delete(`/super-admin/users/${a}`)).data,updateUser:async(a,e)=>(await r.put(`/super-admin/users/${a}`,e)).data,updateUserStatus:async(a,e)=>(await r.put(`/auth/users/${a}/status`,{status:e})).data,getDashboardStats:async()=>(await r.get("/super-admin/dashboard/stats")).data,bulkAssignFarmers:async(a,e)=>(await r.post("/super-admin/bulk-assign-farmers",{farmerIds:a,employeeId:e})).data,assignFarmer:async(a,e)=>(await r.post("/super-admin/assign-farmer",null,{params:{farmerId:a,employeeId:e}})).data},o={getAllFarmers:async function(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await r.get("/super-admin/farmers",{params:a})).data},getFarmerById:async a=>(await r.get(`/super-admin/farmers/${a}`)).data,createFarmer:async a=>(await r.post("/super-admin/farmers",a)).data,updateFarmer:async(a,e)=>(await r.put(`/super-admin/farmers/${a}`,e)).data,deleteFarmer:async a=>(await r.delete(`/super-admin/farmers/${a}`)).data,assignFarmer:async(a,e)=>(await r.post(`/super-admin/farmers/${a}/assign`,{employeeId:e})).data,getFarmerStats:async()=>(await r.get("/super-admin/farmers/stats")).data},d={getAllFarmers:async function(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await r.get("/admin/farmers",{params:a})).data},getAllEmployees:async function(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await r.get("/admin/employees",{params:a})).data},getFarmersWithKyc:async()=>(await r.get("/admin/farmers-with-kyc")).data,getEmployeesWithStats:async()=>(await r.get("/admin/employees-with-stats")).data,getFarmersByEmployee:async a=>(await r.get(`/admin/employees/${a}/assigned-farmers`)).data,getTodoList:async()=>(await r.get("/admin/todo-list")).data,getEnhancedTodoList:async()=>(await r.get("/admin/enhanced-todo-list")).data,getDashboardStats:async()=>(await r.get("/admin/dashboard-stats")).data,filterFarmers:async function(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await r.get("/admin/farmers/filter",{params:a})).data},getLocations:async()=>(await r.get("/admin/locations")).data,bulkAssignFarmers:async(a,e)=>(await r.post("/admin/bulk-assign-farmers",{farmerIds:a,employeeId:e})).data,assignFarmer:async(a,e)=>(await r.post("/admin/assign-farmer",null,{params:{farmerId:a,employeeId:e}})).data,getAssignmentHistory:async function(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await r.get("/admin/assignment-history",{params:a})).data},getFarmersByAssignmentStatus:async a=>(await r.get("/admin/farmers/by-assignment-status",{params:{assignmentStatus:a}})).data,getAllRegistrations:async function(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await r.get("/admin/registration-list",{params:a})).data},getRegistrationListByStatus:async a=>(await r.get("/admin/registration-list/filter",{params:{status:a}})).data,approveRegistration:async(a,e)=>(await r.post(`/admin/registrations/${a}/approve`,e)).data,rejectRegistration:async(a,e)=>(await r.post(`/admin/registrations/${a}/reject`,e)).data},c={getAllEmployees:async function(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(await r.get("/super-admin/employees",{params:a})).data},getEmployeeById:async a=>(await r.get(`/super-admin/employees/${a}`)).data,createEmployee:async a=>(await r.post("/super-admin/employees",a)).data,updateEmployee:async(a,e)=>(await r.put(`/super-admin/employees/${a}`,e)).data,deleteEmployee:async a=>(await r.delete(`/super-admin/employees/${a}`)).data,getEmployeeStats:async()=>(await r.get("/super-admin/employees/stats")).data},l={getAssignedFarmers:async()=>(await r.get("/employee/assigned-farmers")).data,getFarmerById:async a=>(await r.get(`/employee/farmers/${a}`)).data,updateFarmer:async(a,e)=>(await r.put(`/employee/farmers/${a}`,e)).data,getProfile:async()=>(await r.get("/employee/profile")).data,updateProfile:async a=>(await r.put("/employee/profile",a)).data},g={approveKYC:async(a,e)=>(await r.post(`/kyc/${a}/approve`,e)).data,rejectKYC:async(a,e)=>(await r.post(`/kyc/${a}/reject`,e)).data,referBackKYC:async(a,e)=>(await r.post(`/kyc/${a}/refer-back`,e)).data,getKYCStatus:async a=>(await r.get(`/kyc/${a}/status`)).data,uploadKYCDocuments:async(a,e)=>{const t=new FormData;Object.keys(e).forEach((a=>{e[a]&&(Array.isArray(e[a])?e[a].forEach(((e,s)=>{t.append(`${a}[${s}]`,e)})):t.append(a,e[a]))}));const r=s.A.create({baseURL:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_URL||"http://localhost:8080/api",timeout:3e4});r.interceptors.request.use((a=>{const e=localStorage.getItem("token");return e&&(a.headers.Authorization=`Bearer ${e}`),a}));return(await r.post(`/kyc/${a}/upload`,t,{headers:{"Content-Type":"multipart/form-data"}})).data},getKYCHistory:async a=>(await r.get(`/kyc/${a}/history`)).data,getKYCDocumentUrl:async(a,e)=>(await r.get(`/kyc/${a}/documents/${e}/download`)).data,deleteKYCDocument:async(a,e)=>(await r.delete(`/kyc/${a}/documents/${e}`)).data}},1795:(a,e,t)=>{t.r(e),t.d(e,{default:()=>d});var s=t(5043),r=t(3216),n=t(476),i=(t(4003),t(4513)),o=t(579);const d=()=>{const[a,e]=(0,s.useState)(""),[t,d]=(0,s.useState)(30),[c,l]=(0,s.useState)(!1),g=(0,r.Zp)(),p=(0,r.zy)(),{target:m,type:u}=p.state||{};(0,s.useEffect)((()=>{m&&u||(alert("Invalid navigation \u2013 redirecting."),g("/forgot-password"))}),[m,u,g]),(0,s.useEffect)((()=>{if(0===t)return void l(!0);const a=setInterval((()=>d((a=>a-1))),1e3);return()=>clearInterval(a)}),[t]);return(0,o.jsx)("div",{className:"login-page-container",children:(0,o.jsxs)("div",{className:"login-page-main-content",children:[(0,o.jsxs)("div",{className:"login-page-info-panel",children:[(0,o.jsxs)("div",{className:"login-page-brand-header",children:[(0,o.jsxs)("div",{className:"login-page-brand-logo",children:[(0,o.jsx)("span",{className:"login-page-brand-text",children:"Date"}),(0,o.jsx)("span",{className:"login-page-brand-accent",children:"Agri"}),(0,o.jsx)("span",{className:"login-page-brand-icon",children:"\ud83c\udf3f"}),(0,o.jsx)("span",{className:"login-page-brand-text",children:"Stack"})]}),(0,o.jsx)("h1",{className:"login-page-main-title",children:"India Farmer Registry"})]}),(0,o.jsxs)("div",{className:"login-page-platform-info",children:[(0,o.jsx)("h2",{children:"Email Verification"}),(0,o.jsx)("p",{className:"login-page-tagline",children:"Secure your account with one-time verification"})]}),(0,o.jsxs)("div",{className:"login-page-features-grid",children:[(0,o.jsxs)("div",{className:"login-page-feature-card",children:[(0,o.jsx)("div",{className:"login-page-feature-icon",children:"\ud83d\udd10"}),(0,o.jsxs)("div",{className:"login-page-feature-content",children:[(0,o.jsx)("h3",{children:"Secure Verification"}),(0,o.jsx)("p",{children:"One-time password ensures your account security"})]})]}),(0,o.jsxs)("div",{className:"login-page-feature-card",children:[(0,o.jsx)("div",{className:"login-page-feature-icon",children:"\u26a1"}),(0,o.jsxs)("div",{className:"login-page-feature-content",children:[(0,o.jsx)("h3",{children:"Instant Delivery"}),(0,o.jsx)("p",{children:"OTP sent to your email within seconds"})]})]}),(0,o.jsxs)("div",{className:"login-page-feature-card",children:[(0,o.jsx)("div",{className:"login-page-feature-icon",children:"\ud83d\udee1\ufe0f"}),(0,o.jsxs)("div",{className:"login-page-feature-content",children:[(0,o.jsx)("h3",{children:"Account Protection"}),(0,o.jsx)("p",{children:"Prevents unauthorized access to your account"})]})]}),(0,o.jsxs)("div",{className:"login-page-feature-card",children:[(0,o.jsx)("div",{className:"login-page-feature-icon",children:"\ud83d\udd04"}),(0,o.jsxs)("div",{className:"login-page-feature-content",children:[(0,o.jsx)("h3",{children:"Easy Resend"}),(0,o.jsx)("p",{children:"Request new OTP if you don't receive it"})]})]}),(0,o.jsxs)("div",{className:"login-page-feature-card",children:[(0,o.jsx)("div",{className:"login-page-feature-icon",children:"\u2705"}),(0,o.jsxs)("div",{className:"login-page-feature-content",children:[(0,o.jsx)("h3",{children:"Quick Process"}),(0,o.jsx)("p",{children:"Complete verification in under 2 minutes"})]})]})]})]}),(0,o.jsx)("div",{className:"login-page-form-section",children:(0,o.jsxs)("div",{className:"login-page-card",children:[(0,o.jsxs)("div",{className:"login-page-date-logo-section",children:[(0,o.jsx)("img",{src:i,alt:"DATE Logo",className:"login-page-date-logo"}),(0,o.jsxs)("div",{className:"login-page-date-text",children:[(0,o.jsx)("h3",{children:"Digital Agristack Transaction Enterprises"}),(0,o.jsx)("p",{children:"Empowering Agricultural Excellence"})]})]}),(0,o.jsxs)("div",{className:"login-page-login-type-section",children:[(0,o.jsx)("h3",{children:"OTP Verification"}),(0,o.jsxs)("p",{children:["Enter the 6-digit OTP sent to: ",(0,o.jsx)("strong",{children:m})]})]}),(0,o.jsxs)("div",{className:"login-page-form",children:[(0,o.jsxs)("div",{className:"login-page-form-field",children:[(0,o.jsxs)("label",{children:["Enter OTP ",(0,o.jsx)("span",{className:"required",children:"*"})]}),(0,o.jsx)("input",{type:"text",value:a,onChange:a=>e(a.target.value),placeholder:"Enter 6-digit OTP",className:"login-page-form-input",maxLength:6})]}),(0,o.jsx)("div",{className:"login-page-actions-row",children:(0,o.jsx)("button",{onClick:async()=>{if(6===a.length)try{await n.R2.verifyOTP({email:m,otp:a}),alert("OTP verified \u2714\ufe0f"),g("userId"===u?"/change-userid":"/change-password",{state:{target:m}})}catch(e){console.error(e),alert("Invalid or expired OTP.")}else alert("Enter a 6\u2011digit OTP")},className:"login-page-login-btn",disabled:6!==a.length,children:"Verify OTP"})}),(0,o.jsxs)("div",{className:"login-page-forgot-password",children:[(0,o.jsx)("p",{children:"Didn't receive the OTP?"}),(0,o.jsx)("button",{onClick:async()=>{if(c)try{await n.R2.resendOTP(m),alert("OTP resent!"),d(30),l(!1),e("")}catch(a){console.error(a),alert("Could not resend OTP.")}},className:"login-page-create-account-btn",disabled:!c,children:c?"Resend OTP":`Resend in ${t}s`})]})]})]})})]})})}},4003:()=>{},4513:(a,e,t)=>{a.exports=t.p+"static/media/rightlogo.1742b4514aa334820279.png"}}]);
//# sourceMappingURL=795.719a72f7.chunk.js.map