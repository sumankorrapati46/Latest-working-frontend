{"ast":null,"code":"import React,{useState,useRef,useEffect,useMemo}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ActionDropdown=_ref=>{let{item,onEdit,onDelete,onView,onKycUpdate,showDelete=false,customActions=[]}=_ref;const[isOpen,setIsOpen]=useState(false);const dropdownRef=useRef(null);// Close dropdown when clicking outside\nuseEffect(()=>{const handleClickOutside=event=>{if(dropdownRef.current&&!dropdownRef.current.contains(event.target)){setIsOpen(false);}};document.addEventListener('mousedown',handleClickOutside);return()=>{document.removeEventListener('mousedown',handleClickOutside);};},[]);// Build actions array based on available props\nconst actions=useMemo(()=>{const actionList=[];// Add view action if available\nif(onView){actionList.push({label:'View',icon:'👁️',className:'action-view',onClick:()=>onView(item)});}// Add edit action if available\nif(onEdit){actionList.push({label:'Edit',icon:'✏️',className:'action-edit',onClick:()=>onEdit(item)});}// Add delete action if available and showDelete is true\nif(onDelete&&showDelete){actionList.push({label:'Delete',icon:'🗑️',className:'action-delete',onClick:()=>onDelete(item)});}// Add KYC Update action last, to match requested order\nif(onKycUpdate){actionList.push({label:'KYC Update',icon:'📄',className:'action-kyc-update',onClick:()=>onKycUpdate(item)});}// Add custom actions (this is the primary way actions are currently used)\nif(customActions&&Array.isArray(customActions)){customActions.forEach(action=>{actionList.push({...action,onClick:()=>action.onClick(item)});});}try{console.log('ActionDropdown: built actions for item',{hasView:!!onView,hasEdit:!!onEdit,hasDelete:!!onDelete&&showDelete,hasKyc:!!onKycUpdate,customCount:Array.isArray(customActions)?customActions.length:0,total:actionList.length});}catch{}return actionList;},[onEdit,onDelete,onView,showDelete,customActions,item]);const handleActionClick=action=>{if(action.onClick){action.onClick();}setIsOpen(false);};// Don't render if no actions available\nif(actions.length===0){return null;}return/*#__PURE__*/_jsxs(\"div\",{className:\"action-dropdown-component\",ref:dropdownRef,children:[/*#__PURE__*/_jsx(\"button\",{className:\"action-dropdown-toggle\",type:\"button\",onClick:e=>{e.stopPropagation();const next=!isOpen;console.log('ActionDropdown: toggle clicked, next open =',next);setIsOpen(next);},\"aria-label\":\"Actions\",children:\"\\u22EF\"}),/*#__PURE__*/_jsx(\"div\",{className:`action-dropdown-menu ${isOpen?'open':'hidden'}`,children:actions.map((action,index)=>{if(action.showCondition&&!action.showCondition(item)){return null;}return/*#__PURE__*/_jsxs(\"button\",{className:`action-dropdown-item ${action.className||''}`,onClick:()=>handleActionClick(action),children:[action.icon&&/*#__PURE__*/_jsx(\"span\",{className:\"action-dropdown-icon\",children:action.icon}),action.label]},index);})})]});};export default ActionDropdown;","map":{"version":3,"names":["React","useState","useRef","useEffect","useMemo","jsx","_jsx","jsxs","_jsxs","ActionDropdown","_ref","item","onEdit","onDelete","onView","onKycUpdate","showDelete","customActions","isOpen","setIsOpen","dropdownRef","handleClickOutside","event","current","contains","target","document","addEventListener","removeEventListener","actions","actionList","push","label","icon","className","onClick","Array","isArray","forEach","action","console","log","hasView","hasEdit","hasDelete","hasKyc","customCount","length","total","handleActionClick","ref","children","type","e","stopPropagation","next","map","index","showCondition"],"sources":["D:/Fronted-dev/Latest-working-frontend/src/components/ActionDropdown.jsx"],"sourcesContent":["import React, { useState, useRef, useEffect, useMemo } from 'react';\n\nconst ActionDropdown = ({ \n  item, \n  onEdit, \n  onDelete, \n  onView, \n  onKycUpdate,\n  showDelete = false, \n  customActions = [] \n}) => {\n  const [isOpen, setIsOpen] = useState(false);\n  const dropdownRef = useRef(null);\n\n  // Close dropdown when clicking outside\n  useEffect(() => {\n    const handleClickOutside = (event) => {\n      if (dropdownRef.current && !dropdownRef.current.contains(event.target)) {\n        setIsOpen(false);\n      }\n    };\n\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, []);\n\n  // Build actions array based on available props\n  const actions = useMemo(() => {\n    const actionList = [];\n\n    // Add view action if available\n    if (onView) {\n      actionList.push({\n        label: 'View',\n        icon: '👁️',\n        className: 'action-view',\n        onClick: () => onView(item)\n      });\n    }\n\n    // Add edit action if available\n    if (onEdit) {\n      actionList.push({\n        label: 'Edit',\n        icon: '✏️',\n        className: 'action-edit',\n        onClick: () => onEdit(item)\n      });\n    }\n\n    // Add delete action if available and showDelete is true\n    if (onDelete && showDelete) {\n      actionList.push({\n        label: 'Delete',\n        icon: '🗑️',\n        className: 'action-delete',\n        onClick: () => onDelete(item)\n      });\n    }\n\n    // Add KYC Update action last, to match requested order\n    if (onKycUpdate) {\n      actionList.push({\n        label: 'KYC Update',\n        icon: '📄',\n        className: 'action-kyc-update',\n        onClick: () => onKycUpdate(item)\n      });\n    }\n\n    // Add custom actions (this is the primary way actions are currently used)\n    if (customActions && Array.isArray(customActions)) {\n      customActions.forEach(action => {\n        actionList.push({\n          ...action,\n          onClick: () => action.onClick(item)\n        });\n      });\n    }\n\n    try {\n      console.log('ActionDropdown: built actions for item', {\n        hasView: !!onView,\n        hasEdit: !!onEdit,\n        hasDelete: !!onDelete && showDelete,\n        hasKyc: !!onKycUpdate,\n        customCount: Array.isArray(customActions) ? customActions.length : 0,\n        total: actionList.length\n      });\n    } catch {}\n    return actionList;\n  }, [onEdit, onDelete, onView, showDelete, customActions, item]);\n\n  const handleActionClick = (action) => {\n    if (action.onClick) {\n      action.onClick();\n    }\n    setIsOpen(false);\n  };\n\n  // Don't render if no actions available\n  if (actions.length === 0) {\n    return null;\n  }\n\n  return (\n    <div className=\"action-dropdown-component\" ref={dropdownRef}>\n      <button\n        className=\"action-dropdown-toggle\"\n        type=\"button\"\n        onClick={(e) => {\n          e.stopPropagation();\n          const next = !isOpen;\n          console.log('ActionDropdown: toggle clicked, next open =', next);\n          setIsOpen(next);\n        }}\n        aria-label=\"Actions\"\n      >\n        ⋯\n      </button>\n      \n      <div className={`action-dropdown-menu ${isOpen ? 'open' : 'hidden'}`}>\n        {actions.map((action, index) => {\n          if (action.showCondition && !action.showCondition(item)) {\n            return null;\n          }\n          return (\n            <button\n              key={index}\n              className={`action-dropdown-item ${action.className || ''}`}\n              onClick={() => handleActionClick(action)}\n            >\n              {action.icon && <span className=\"action-dropdown-icon\">{action.icon}</span>}\n              {action.label}\n            </button>\n          );\n        })}\n      </div>\n    </div>\n  );\n};\n\nexport default ActionDropdown; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}