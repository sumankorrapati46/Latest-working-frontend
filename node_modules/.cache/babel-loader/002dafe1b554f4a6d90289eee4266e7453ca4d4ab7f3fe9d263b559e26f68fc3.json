{"ast":null,"code":"import React,{useState,useRef,useEffect,useMemo}from'react';import{createPortal}from'react-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ActionDropdown=_ref=>{let{item,onEdit,onDelete,onView,onKycUpdate,showDelete=false,customActions=[]}=_ref;const[isOpen,setIsOpen]=useState(false);const dropdownRef=useRef(null);const toggleRef=useRef(null);const[menuPos,setMenuPos]=useState({top:0,left:0});// Close dropdown when clicking outside and compute portal position\nuseEffect(()=>{const handleClickOutside=event=>{const portal=document.getElementById('action-dropdown-portal-menu');if(toggleRef.current&&!toggleRef.current.contains(event.target)&&(!portal||!portal.contains(event.target))){setIsOpen(false);}};const updatePos=()=>{if(!toggleRef.current)return;const rect=toggleRef.current.getBoundingClientRect();const width=220;const top=rect.bottom+10+window.scrollY;const left=Math.min(rect.right-width+window.scrollX,window.innerWidth-width-8);setMenuPos({top,left});};if(isOpen){updatePos();document.addEventListener('mousedown',handleClickOutside);window.addEventListener('scroll',updatePos,true);window.addEventListener('resize',updatePos);}return()=>{document.removeEventListener('mousedown',handleClickOutside);window.removeEventListener('scroll',updatePos,true);window.removeEventListener('resize',updatePos);};},[isOpen]);// Build actions array based on available props\nconst actions=useMemo(()=>{const actionList=[];// Add view action if available\nif(onView){actionList.push({label:'View',icon:'👁️',className:'action-view',onClick:()=>onView(item)});}// Add edit action if available\nif(onEdit){actionList.push({label:'Edit',icon:'✏️',className:'action-edit',onClick:()=>onEdit(item)});}// Add delete action if available and showDelete is true\nif(onDelete&&showDelete){actionList.push({label:'Delete',icon:'🗑️',className:'action-delete',onClick:()=>onDelete(item)});}// Add KYC Update action last, to match requested order\nif(onKycUpdate){actionList.push({label:'KYC Update',icon:'📄',className:'action-kyc-update',onClick:()=>onKycUpdate(item)});}// Add custom actions (this is the primary way actions are currently used)\nif(customActions&&Array.isArray(customActions)){customActions.forEach(action=>{actionList.push({...action,onClick:()=>action.onClick(item)});});}try{console.log('ActionDropdown: built actions for item',{hasView:!!onView,hasEdit:!!onEdit,hasDelete:!!onDelete&&showDelete,hasKyc:!!onKycUpdate,customCount:Array.isArray(customActions)?customActions.length:0,total:actionList.length});}catch{}return actionList;},[onEdit,onDelete,onView,showDelete,customActions,item]);const handleActionClick=action=>{if(action.onClick){action.onClick();}setIsOpen(false);};// Don't render if no actions available\nif(actions.length===0){return null;}return/*#__PURE__*/_jsxs(\"div\",{className:\"action-dropdown-component\",ref:dropdownRef,children:[/*#__PURE__*/_jsx(\"button\",{className:\"action-dropdown-toggle\",type:\"button\",ref:toggleRef,onClick:e=>{e.stopPropagation();const next=!isOpen;console.log('ActionDropdown: toggle clicked, next open =',next);setIsOpen(next);},\"aria-label\":\"Actions\",children:\"\\u22EF\"}),isOpen&&/*#__PURE__*/createPortal(/*#__PURE__*/_jsx(\"div\",{id:\"action-dropdown-portal-menu\",className:\"action-dropdown-portal-menu open\",style:{position:'absolute',top:menuPos.top,left:menuPos.left},children:actions.map((action,index)=>{if(action.showCondition&&!action.showCondition(item)){return null;}return/*#__PURE__*/_jsxs(\"button\",{className:`action-dropdown-item ${action.className||''}`,onClick:()=>handleActionClick(action),children:[action.icon&&/*#__PURE__*/_jsx(\"span\",{className:\"action-dropdown-icon\",children:action.icon}),action.label]},index);})}),document.body)]});};export default ActionDropdown;","map":{"version":3,"names":["React","useState","useRef","useEffect","useMemo","createPortal","jsx","_jsx","jsxs","_jsxs","ActionDropdown","_ref","item","onEdit","onDelete","onView","onKycUpdate","showDelete","customActions","isOpen","setIsOpen","dropdownRef","toggleRef","menuPos","setMenuPos","top","left","handleClickOutside","event","portal","document","getElementById","current","contains","target","updatePos","rect","getBoundingClientRect","width","bottom","window","scrollY","Math","min","right","scrollX","innerWidth","addEventListener","removeEventListener","actions","actionList","push","label","icon","className","onClick","Array","isArray","forEach","action","console","log","hasView","hasEdit","hasDelete","hasKyc","customCount","length","total","handleActionClick","ref","children","type","e","stopPropagation","next","id","style","position","map","index","showCondition","body"],"sources":["D:/Fronted-dev/Latest-working-frontend/src/components/ActionDropdown.jsx"],"sourcesContent":["import React, { useState, useRef, useEffect, useMemo } from 'react';\nimport { createPortal } from 'react-dom';\n\nconst ActionDropdown = ({ \n  item, \n  onEdit, \n  onDelete, \n  onView, \n  onKycUpdate,\n  showDelete = false, \n  customActions = [] \n}) => {\n  const [isOpen, setIsOpen] = useState(false);\n  const dropdownRef = useRef(null);\n  const toggleRef = useRef(null);\n  const [menuPos, setMenuPos] = useState({ top: 0, left: 0 });\n\n  // Close dropdown when clicking outside and compute portal position\n  useEffect(() => {\n    const handleClickOutside = (event) => {\n      const portal = document.getElementById('action-dropdown-portal-menu');\n      if (\n        toggleRef.current &&\n        !toggleRef.current.contains(event.target) &&\n        (!portal || !portal.contains(event.target))\n      ) {\n        setIsOpen(false);\n      }\n    };\n    const updatePos = () => {\n      if (!toggleRef.current) return;\n      const rect = toggleRef.current.getBoundingClientRect();\n      const width = 220;\n      const top = rect.bottom + 10 + window.scrollY;\n      const left = Math.min(\n        rect.right - width + window.scrollX,\n        window.innerWidth - width - 8\n      );\n      setMenuPos({ top, left });\n    };\n    if (isOpen) {\n      updatePos();\n      document.addEventListener('mousedown', handleClickOutside);\n      window.addEventListener('scroll', updatePos, true);\n      window.addEventListener('resize', updatePos);\n    }\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n      window.removeEventListener('scroll', updatePos, true);\n      window.removeEventListener('resize', updatePos);\n    };\n  }, [isOpen]);\n\n  // Build actions array based on available props\n  const actions = useMemo(() => {\n    const actionList = [];\n\n    // Add view action if available\n    if (onView) {\n      actionList.push({\n        label: 'View',\n        icon: '👁️',\n        className: 'action-view',\n        onClick: () => onView(item)\n      });\n    }\n\n    // Add edit action if available\n    if (onEdit) {\n      actionList.push({\n        label: 'Edit',\n        icon: '✏️',\n        className: 'action-edit',\n        onClick: () => onEdit(item)\n      });\n    }\n\n    // Add delete action if available and showDelete is true\n    if (onDelete && showDelete) {\n      actionList.push({\n        label: 'Delete',\n        icon: '🗑️',\n        className: 'action-delete',\n        onClick: () => onDelete(item)\n      });\n    }\n\n    // Add KYC Update action last, to match requested order\n    if (onKycUpdate) {\n      actionList.push({\n        label: 'KYC Update',\n        icon: '📄',\n        className: 'action-kyc-update',\n        onClick: () => onKycUpdate(item)\n      });\n    }\n\n    // Add custom actions (this is the primary way actions are currently used)\n    if (customActions && Array.isArray(customActions)) {\n      customActions.forEach(action => {\n        actionList.push({\n          ...action,\n          onClick: () => action.onClick(item)\n        });\n      });\n    }\n\n    try {\n      console.log('ActionDropdown: built actions for item', {\n        hasView: !!onView,\n        hasEdit: !!onEdit,\n        hasDelete: !!onDelete && showDelete,\n        hasKyc: !!onKycUpdate,\n        customCount: Array.isArray(customActions) ? customActions.length : 0,\n        total: actionList.length\n      });\n    } catch {}\n    return actionList;\n  }, [onEdit, onDelete, onView, showDelete, customActions, item]);\n\n  const handleActionClick = (action) => {\n    if (action.onClick) {\n      action.onClick();\n    }\n    setIsOpen(false);\n  };\n\n  // Don't render if no actions available\n  if (actions.length === 0) {\n    return null;\n  }\n\n  return (\n    <div className=\"action-dropdown-component\" ref={dropdownRef}>\n      <button\n        className=\"action-dropdown-toggle\"\n        type=\"button\"\n        ref={toggleRef}\n        onClick={(e) => {\n          e.stopPropagation();\n          const next = !isOpen;\n          console.log('ActionDropdown: toggle clicked, next open =', next);\n          setIsOpen(next);\n        }}\n        aria-label=\"Actions\"\n      >\n        ⋯\n      </button>\n\n      {isOpen && createPortal(\n        <div\n          id=\"action-dropdown-portal-menu\"\n          className=\"action-dropdown-portal-menu open\"\n          style={{ position: 'absolute', top: menuPos.top, left: menuPos.left }}\n        >\n          {actions.map((action, index) => {\n            if (action.showCondition && !action.showCondition(item)) {\n              return null;\n            }\n            return (\n              <button\n                key={index}\n                className={`action-dropdown-item ${action.className || ''}`}\n                onClick={() => handleActionClick(action)}\n              >\n                {action.icon && <span className=\"action-dropdown-icon\">{action.icon}</span>}\n                {action.label}\n              </button>\n            );\n          })}\n        </div>,\n        document.body\n      )}\n    </div>\n  );\n};\n\nexport default ActionDropdown; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}